<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Minimum Penalty for a Shop - Solution</title>
</head>
<body>
<h2 id="solution">Minimum Penalty for a Shop - Solution</h2>
<hr>
<h3 id="overview">Overview</h3>
<p>We can start by considering the brute force approach, attempting to close the stop at every possible hour.</p>
<p><img src="../Figures/2483/1.png" alt="img"></p>
<p>The calculation of the penalty (closed after a certain number hours) is divided into two parts:</p>
<ul>
    <li>During open hours, every 'N' character contributes to 1 penalty.</li>
    <li>During closed hours, every 'Y' character also contributes to 1 penalty.</li>
</ul>
<p>We can calculate the total penalty by traversing <code>customers</code>.</p>
<p><img src="2.png" alt="img"></p>
<p>However, considering the size of <code>customers</code>, this quadratic time complexity approach may exceed the time
    limit. Therefore, we need to consider a more efficient traversal method.</p>
<hr>
<h3 id="approach-1-two-passes">Approach 1: Two Passes</h3>
<h4 id="intuition">Intuition</h4>
<p>Notice that in two adjacent cases (i.e. closing after the <span class="math math-inline"><span class="katex"><span
        class="katex-mathml">i−1th{i-1}^{th}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
        class="strut" style="height: 0.9819em; vertical-align: -0.0833em;"></span><span class="mord"><span class="mord"><span
        class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
        class="vlist" style="height: 0.8985em;"><span style="top: -3.1124em; margin-right: 0.05em;"><span class="pstrut"
                                                                                                          style="height: 2.7em;"></span><span
        class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
        class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
    hour and closing after the <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">ithi^{th}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8491em;"></span><span class="mord"><span
            class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
            class="vlist" style="height: 0.8491em;"><span style="top: -3.063em; margin-right: 0.05em;"><span
            class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span
            class="mord mtight"><span class="mord mathnormal mtight">t</span><span
            class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
    hour, which differ by 1 hour), only the status of one hour has changed, where the status has been changed from a
    closing hour to an open hour. Hence, we can record the overall penalty change by calculating the difference in
    penalty between two adjacent cases.</p>
<p><img src="3.png" alt="img"></p>
<p>Therefore, let's first calculate the total penalty if we close instantly (after hour 0). Hence, the penalty of
    closing the shop after <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">0th0^{th}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8491em;"></span><span class="mord"><span class="mord">0</span><span
            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                              style="height: 0.8491em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
            class="mord mathnormal mtight">t</span><span
            class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
    hour is based on the status of <code>customers[0]</code>:</p>
<ul>
    <li>If it is 'Y', it means one penalty from the closed hours is removed, resulting in a decrease of the total
        penalty by 1.
    </li>
    <li>If it is 'N', it means an additional penalty is added from the open hours, resulting in an increase of the total
        penalty by 1.
    </li>
</ul>
<p>Each time we iterate over a new <code>i</code>, we are finding the new penalty if we were to close after
    <code>i</code> instead of after <code>i - 1</code>.</p>
<p>Please refer to the slides below for a visual representation. The "OPEN" and "CLOSE" in the slides represent the
    contribution toward the current penalty. "OPEN" means that there are no customers when the store is open, and
    "CLOSE" means that there are customers when the store is closed.</p>
<p>
<div class="relative mx-auto mb-6 flex flex-col overflow-hidden rounded-lg border-[1px] border-label-1"
     style="max-width: 601px;">
    <div class="rounded-lg" style="max-height: 301px;"><img alt="Current"
                                                            class="object-fit-contain !mb-0 max-h-full max-w-full"
                                                            src="blob:https://leetcode.com/3b1185f2-108a-43b7-bcb2-7d7c7b6b12b3">
    </div>
    <div class="absolute top-[50%] left-[50%] flex h-12 w-12 translate-x-[-50%] translate-y-[-50%] items-center justify-center rounded-full bg-black/30">
        <div class="flex h-4 w-4 cursor-pointer items-center justify-center text-[35px]">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"
                 class="h-full w-full text-white">
                <path fill-rule="evenodd"
                      d="M18.97 12.871l-12.96 7.29a1 1 0 01-1.49-.87V4.71a1 1 0 011.49-.872l12.96 7.29a1 1 0 010 1.743z"
                      clip-rule="evenodd"></path>
            </svg>
        </div>
    </div>
    <div class="relative flex h-8 select-none items-center justify-around bg-black">
        <div class="flex items-center space-x-7">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"
                 class="w-4 cursor-pointer text-gray-6 dark:text-dark-gray-6 hover:text-gray-7 dark:hover:text-dark-gray-7">
                <path fill-rule="evenodd"
                      d="M16.091 4.929l-7.057 7.078 7.057 7.064a1 1 0 01-1.414 1.414l-7.764-7.77a1 1 0 010-1.415l7.764-7.785a1 1 0 111.415 1.414z"
                      clip-rule="evenodd"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"
                 class="w-4 cursor-pointer text-gray-6 dark:text-dark-gray-6 hover:text-gray-7 dark:hover:text-dark-gray-7">
                <path fill-rule="evenodd"
                      d="M18.97 12.871l-12.96 7.29a1 1 0 01-1.49-.87V4.71a1 1 0 011.49-.872l12.96 7.29a1 1 0 010 1.743z"
                      clip-rule="evenodd"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"
                 class="w-4 cursor-pointer text-gray-6 dark:text-dark-gray-6 hover:text-gray-7 dark:hover:text-dark-gray-7">
                <path fill-rule="evenodd"
                      d="M7.913 19.071l7.057-7.078-7.057-7.064a1 1 0 011.414-1.414l7.764 7.77a1 1 0 010 1.415l-7.764 7.785a1 1 0 01-1.414-1.414z"
                      clip-rule="evenodd"></path>
            </svg>
        </div>
        <div class="absolute right-0 mr-5 text-xs font-medium text-white">1 / 13</div>
    </div>
</div>
</p>
<br>
<h4 id="algorithm">Algorithm</h4>
<ol>
    <li>
        <p>Iterate over <code>customers</code>, set <code>cur_penalty</code> and <code>min_penalty</code> as the total
            count of the character <code>Y</code>, which is the penalty if the shop closes at hour 0. Set <code>earliest_hour</code>
            as 0.</p>
    </li>
    <li>
        <p>Iterate over <code>customers</code>, for the <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">ithi^{th}</span><span class="katex-html" aria-hidden="true"><span
                class="base"><span class="strut" style="height: 0.8491em;"></span><span class="mord"><span
                class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
                class="vlist" style="height: 0.8491em;"><span style="top: -3.063em; margin-right: 0.05em;"><span
                class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span
                class="mord mtight"><span class="mord mathnormal mtight">t</span><span
                class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
            character:</p>
        <ul>
            <li>If <code>customers[i] = 'Y'</code>, decrement <code>cur_penalty</code> by 1. Otherwise, increment <code>cur_penalty</code>
                by 1.
            </li>
            <li>If <code>cur_penalty &lt; min_penalty</code>, set <code>earliest_hour</code> as <code>i + 1</code>, and
                set <code>min_penalty</code> as <code>cur_penalty</code>.
            </li>
        </ul>
    </li>
    <li>
        <p>Return <code>earliest_hour</code> once the iteration is complete.</p>
    </li>
</ol>
<h4 id="implementation">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
    public int bestClosingTime(String customers) {
        int curPenalty = 0;
        for (int i = 0; i < customers.length(); i++) {
            if (customers.charAt(i) == 'Y') {
                curPenalty++;
            }
        }

        // Start with closing at hour 0, the penalty equals all 'Y' in closed hours.
        int minPenalty = curPenalty;
        int earliestHour = 0;

        for (int i = 0; i < customers.length(); i++) {
            char ch = customers.charAt(i);

            // If status in hour i is 'Y', moving it to open hours decrement
            // penalty by 1. Otherwise, moving 'N' to open hours increment
            // penatly by 1.
            if (ch == 'Y') {
                curPenalty--;
            } else {
                curPenalty++;
            }

            // Update earliestHour if a smaller penatly is encountered.
            if (curPenalty < minPenalty) {
                earliestHour = i + 1;
                minPenalty = curPenalty;
            }
        }

        return earliestHour;
    }
}
    </code>
    C++
    <code>
        class Solution {
public:
    int bestClosingTime(string customers) {
        // Start with closing at hour 0, the penalty equals all 'Y' in closed hours.
        int curPenalty = count(customers.begin(), customers.end(), 'Y');
        int minPenalty = curPenalty;
        int earliestHour = 0;

        for (int i = 0; i < customers.size(); i++) {
            char ch = customers[i];

            // If status in hour i is 'Y', moving it to open hours decrement
            // penalty by 1. Otherwise, moving 'N' to open hours increment
            // penatly by 1.
            if (ch == 'Y') {
                curPenalty--;
            } else {
                curPenalty++;
            }

            // Update earliestHour if a smaller penatly is encountered.
            if (curPenalty < minPenalty) {
                earliestHour = i + 1;
                minPenalty = curPenalty;
            }
        }

        return earliestHour;
    }
};
    </code>
    Python3
    <code>
        class Solution:
    def bestClosingTime(self, customers: str) -> int:
        # Start with closing at hour 0, the penalty equals all 'Y' in closed hours.
        cur_penalty = min_penalty = customers.count('Y')
        earliest_hour = 0

        for i, ch in enumerate(customers):
            # If status in hour i is 'Y', moving it to open hours decrement
            # penalty by 1. Otherwise, moving 'N' to open hours increment
            # penatly by 1.
            if ch == 'Y':
                cur_penalty -= 1
            else:
                cur_penalty += 1

            # Update earliest_hour if a smaller penatly is encountered
            if cur_penalty < min_penalty:
                earliest_hour = i + 1
                min_penalty = cur_penalty

        return earliest_hour
    </code>
</pre>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">nn</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>
    be the length of <code>customers</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(n)O(n)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>
        </p>
        <ul>
            <li>The first traversal is used to calculate the total count of 'Y' in <code>customers</code>, which takes
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(n)O(n)</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span
                        class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>
                time.
            </li>
            <li>In each step of the second traversal, we update <code>cur_penalty</code>, <code>min_penalty</code>, and
                <code>earliest_hour</code> based on the character <code>customers[i]</code>, which can be done in
                constant time. Therefore, the second traversal also takes <span class="math math-inline"><span
                        class="katex"><span class="katex-mathml">O(n)O(n)</span><span class="katex-html"
                                                                                      aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span
                        class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>
                time.
            </li>
        </ul>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord">1</span><span
                class="mclose">)</span></span></span></span></span></p>
        <ul>
            <li>We only need to update several parameters, <code>cur_penalty</code>, <code>min_penalty</code> and <code>earliest_hour</code>,
                which takes <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span
                        class="mopen">(</span><span class="mord">1</span><span
                        class="mclose">)</span></span></span></span></span> space.
            </li>
        </ul>
    </li>
</ul>
<br>
<hr>
<h3 id="approach-2-one-pass">Approach 2: One Pass</h3>
<h4 id="intuition-1">Intuition</h4>
<p>In the previous solution, we used the first traversal to calculate the count of 'Y', ensuring that each penalty
    obtained is accurate. However, we do need the actual penalty values. It is important to note that the problem only
    requires the <strong>earliest hour</strong> with the lowest penalty. Thus, the only thing that matters is the
    penalty of the hours relative to each other, and our initial reference point is not significant.</p>
<p><img src="4.png" alt="img"></p>
<p>For convenience, we can directly set <code>cur_penalty</code> to 0, which is equivalent to shifting the curve of the
    actual penalty vertically. This will not affect the calculation result. Note that we could initialize <code>cur_penalty</code>
    to any value and the algorithm would still work since the initial reference point is insignificant.</p>
<br>
<h4 id="algorithm-1">Algorithm</h4>
<ol>
    <li>
        <p>Set <code>cur_penalty</code>, <code>min_penalty</code> and <code>earliest_hour</code> as 0.</p>
    </li>
    <li>
        <p>Iterate over <code>customers</code>, for the <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">ithi^{th}</span><span class="katex-html" aria-hidden="true"><span
                class="base"><span class="strut" style="height: 0.8491em;"></span><span class="mord"><span
                class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
                class="vlist" style="height: 0.8491em;"><span style="top: -3.063em; margin-right: 0.05em;"><span
                class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span
                class="mord mtight"><span class="mord mathnormal mtight">t</span><span
                class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
            character:</p>
        <ul>
            <li>If <code>customers[i] = 'Y'</code>, decrement <code>cur_penalty</code> by 1. Otherwise, increment <code>cur_penalty</code>
                by 1.
            </li>
            <li>If <code>cur_penalty &lt; min_penalty</code>, set <code>earliest_hour</code> as <code>i + 1</code>, and
                set <code>min_penalty</code> as <code>cur_penalty</code>.
            </li>
        </ul>
    </li>
    <li>
        <p>Return <code>earliest_hour</code> once the iteration is complete.</p>
    </li>
</ol>
<h4 id="implementation-1">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
    public int bestClosingTime(String customers) {
        // Start with closing at hour 0 and assume the current penalty is 0.
        int minPenalty = 0, curPenalty = 0;
        int earliestHour = 0;

        for (int i = 0; i < customers.length(); i++) {
            char ch = customers.charAt(i);

            // If status in hour i is 'Y', moving it to open hours decrement
            // penalty by 1. Otherwise, moving 'N' to open hours increment
            // penatly by 1.
            if (ch == 'Y') {
                curPenalty--;
            } else {
                curPenalty++;
            }

            // Update earliestHour if a smaller penatly is encountered.
            if (curPenalty < minPenalty) {
                earliestHour = i + 1;
                minPenalty = curPenalty;
            }
        }

        return earliestHour;
    }
}
    </code>
    C++
    <code>
        class Solution {
public:
    int bestClosingTime(string customers) {
        // Start with closing at hour 0 and assume the current penalty is 0.
        int minPenalty = 0, curPenalty = 0;
        int earliestHour = 0;

        for (int i = 0; i < customers.size(); i++) {
            char ch = customers[i];

            // If status in hour i is 'Y', moving it to open hours decrement
            // penalty by 1. Otherwise, moving 'N' to open hours increment
            // penatly by 1.
            if (ch == 'Y') {
                curPenalty--;
            } else {
                curPenalty++;
            }

            // Update earliestHour if a smaller penatly is encountered.
            if (curPenalty < minPenalty) {
                earliestHour = i + 1;
                minPenalty = curPenalty;
            }
        }

        return earliestHour;
    }
};
    </code>
    Python3
    <code>
        class Solution:
    def bestClosingTime(self, customers: str) -> int:
        # Start with closing at hour 0 and assume the current penalty is 0.
        cur_penalty = min_penalty = 0
        earliest_hour = 0

        for i, ch in enumerate(customers):
            # If status in hour i is 'Y', moving it to open hours decrement
            # penalty by 1. Otherwise, moving 'N' to open hours increment
            # penatly by 1.
            if ch == 'Y':
                cur_penalty -= 1
            else:
                cur_penalty += 1

            # Update earliest_hour if a smaller penatly is encountered
            if cur_penalty < min_penalty:
                earliest_hour = i + 1
                min_penalty = cur_penalty

        return earliest_hour
    </code>
</pre>
<h4 id="complexity-analysis-1">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">nn</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>
    be the length of <code>customers</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(n)O(n)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>
        </p>
        <ul>
            <li>In each step of the traversal, we update <code>cur_penalty</code>, <code>min_penalty</code>, and <code>earliest_hour</code>
                based on the character <code>customers[i]</code>, which can be done in constant time. Therefore, the
                traversal takes <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">O(n)O(n)</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span
                        class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>
                time.
            </li>
        </ul>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord">1</span><span
                class="mclose">)</span></span></span></span></span></p>
        <ul>
            <li>We only need to update several parameters, <code>cur_penalty</code>, <code>min_penalty</code> and <code>earliest_hour</code>,
                which takes <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span
                        class="mopen">(</span><span class="mord">1</span><span
                        class="mclose">)</span></span></span></span></span> space.
            </li>
        </ul>
    </li>
</ul>
<br>
</body>
</html>