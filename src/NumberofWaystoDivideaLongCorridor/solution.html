<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Number of Ways to Divide a Long Corridor - Solution</title>
</head>
<body>
<h2 id="solution">Number of Ways to Divide a Long Corridor - Solution</h2>
<hr>
<h3 id="overview">Overview</h3>
<p>In this problem, we are supposed to divide the <code>corridor</code> which contains seats (encoded by <code>S</code>)
    and plants (encoded by <code>P</code>).</p>
<p>The division should produce non-overlapping sections such that each section contains <strong>exactly</strong> two
    <code>S</code>. There is no restriction on the number of <code>P</code> in each section, which offers flexibility to
    shift the divider.</p>
<blockquote>
    <p>Flexibility provided by <code>P</code> produces different ways to perform the division.</p>
</blockquote>
<p>We are supposed to count the number of ways to divide the corridor, and then return the count modulo
    <code>1000000007</code>. Moreover, if there is no way to divide the corridor, we should return <code>0</code>.</p>
<p>Let's try to filter out cases when the task is not possible, based on the number of <code>S</code> and <code>P</code>
    in the corridor.</p>
<ul>
    <li>
        <p>if we have <code>0</code> seat, then we can't divide the corridor, because no section can contain <strong>exactly</strong>
            two <code>S</code>.</p>
    </li>
    <li>
        <p>if we have only <code>1</code> seat, then we can't divide the corridor, because no section can contain
            <strong>exactly</strong> two <code>S</code>.</p>
    </li>
    <li>
        <p>if we have only <code>2</code> seats, then we can divide the corridor, but in only one way, because there is
            only one way to divide the corridor into two sections, each containing <strong>exactly</strong> two
            <code>S</code>.</p>
        <p><img src="Slide1_1.PNG" alt="twoS" style="height: 75px;"></p>
        <p>The <code>...</code> in the illustration above represents any number of <code>P</code> (including
            <code>0</code>) in the <code>corridor</code>.</p>
        <p>The only way is to use the existing installed end-divider so that each section contains
            <strong>exactly</strong> two <code>S</code>. If we shift any of these dividers or install a new divider,
            then we will end up with a section containing less than two <code>S</code>.</p>
    </li>
    <li>
        <p>if we have only <code>3</code> seats, then again, we can't divide the corridor, because no division is such
            that each section contains <strong>exactly</strong> two <code>S</code>. There will be at least one section
            containing less than two <code>S</code>.</p>
    </li>
    <li>
        <p>Let's examine one more case before generalizing the above observations. If we have <code>4</code> seats, then
            we can divide the corridor. Let's focus on the illustration to understand the division.</p>
        <p><img src="Slide1_2.PNG" alt="fourS" style="height: 75px;"></p>
        <p>The <code>...</code> in the illustration above represents any number of <code>P</code> (including
            <code>0</code>) in the <code>corridor</code>.</p>
        <p>We can have only one divider between the second and third <code>S</code>. Now, the number of ways we can have
            this divider certainly depends on the number of <code>P</code> between the second and third <code>S</code>.
        </p>
        <p><img src="Slide2.PNG" alt="fourS" style="height: 80px;"></p>
        <ul>
            <li>
                <p>If there is <code>0</code> <code>P</code> between the second and third <code>S</code>, then we can
                    have only one way of installing the divider.</p>
                <p><img src="Slide3_1.PNG" alt="fourSzeroP" style="height: 75px;"></p>
            </li>
            <li>
                <p>If there is <code>1</code> <code>P</code> between the second and third <code>S</code>, then we can
                    have two ways of installing the divider. Note that out of these two blue bars, we will select only
                    one in one division. Thus, there are two <strong>different</strong> ways in this example, with one
                    divider!</p>
                <p><img src="Slide3_2.PNG" alt="fourSoneP" style="height: 75px;"></p>
            </li>
            <li>
                <p>If there are <code>2</code> <code>P</code> between the second and third <code>S</code>, then we can
                    have three ways of installing the divider. Again, more precisely, there are three
                    <strong>different</strong> ways in this example, with one divider!</p>
                <p><img src="Slide3_3.PNG" alt="fourStwoP" style="height: 75px;"></p>
            </li>
        </ul>
        <p>In general,</p>
        <p>"If there are <code>k</code> <code>P</code> between second and third <code>S</code>, then we can have <code>k+1</code>
            ways of installing the divider"</p>
        <p>In other words, we can say that</p>
        <p><strong>"If the index of second <code>S</code> is <code>i</code> and the index of third <code>S</code> is
            <code>j</code>, then we can have <code>j-i</code> ways of installing the divider"</strong></p>
    </li>
</ul>
<p>Based on the above observations, we can generalize the following facts.</p>
<ol>
    <li>
        <p><em>"No seats, or odd number of seats in the <code>corridor</code> implies that there is no way to divide the
            <code>corridor</code>"</em></p>
        <ul>
            <li>
                <p>The contrapositive of every implication is also true. Thus, we can say that</p>
                <p><em>"If there is a way to divide the <code>corridor</code>, then there will be seats in the corridor,
                    and the number of seats will be even"</em></p>
            </li>
            <li>
                <p>Readers can appreciate that the converse of the fact is also true.</p>
                <p><em>"If there is no way to divide the <code>corridor</code>, then there will be no seats, or odd
                    number of seats in the <code>corridor</code>."</em></p>
            </li>
            <li>
                <p>Moreover, the contrapositive of this converse, like every other contrapositive, is also true. Thus,
                    we can say that</p>
                <p><em>"If there are seats in the corridor, and the number of seats is even, then there will be a way to
                    divide the <code>corridor</code>"</em></p>
            </li>
        </ul>
    </li>
    <li>
        <p>The number of plants does not determine the presence of a dividing way. However, the number of plants, if
            there is a dividing way, will determine the number of <strong>different</strong> methods of installing the
            divider.</p>
    </li>
    <li>
        <p>We can also emphasize that the pair of a given seat <code>S</code> is fixed (provided there is a way to
            divide the <code>corridor</code>). This can be illustrated as</p>
        <ul>
            <li>
                <p>the first <code>S</code> will always be paired with the second <code>S</code></p>
            </li>
            <li>
                <p>the second <code>S</code> will always be paired with the first <code>S</code>. If it has another
                    neighbor, the third <code>S</code>, then also it will be paired with the first <code>S</code> only.
                    We can't leave the first <code>S</code> unpaired because each section should contain
                    <strong>exactly</strong> two <code>S</code>.</p>
            </li>
            <li>
                <p>the third <code>S</code> will always be paired with the fourth <code>S</code></p>
            </li>
            <li>
                <p>the fifth <code>S</code> will always be paired with the sixth <code>S</code></p>
            </li>
            <li>
                <p>and so on...</p>
            </li>
        </ul>
    </li>
    <li>
        <p><strong>We can only install a divider between two <code>S</code> that are "neighbors, but not paired", and
            plants in between them offer flexibility to install the divider in different ways</strong>.</p>
        <p>The number of plants between paired seats doesn't offer any facility to install the divider.</p>
        <blockquote>
            <ul>
                <li>The first <code>S</code> and the second <code>S</code> are paired neighbors. The plants in between
                    them offer any facility to install the divider.
                </li>
                <li>The second <code>S</code> and the third <code>S</code> are "neighbors, but not paired". The plants
                    in between them offer flexibility to install the divider in different ways.
                </li>
                <li>The first <code>S</code> and the third <code>S</code> are not neighbors.</li>
            </ul>
        </blockquote>
        <p>Similarly, the number of plants between the pre-installed divider and the first seat (or the last seat and
            the pre-installed divider) doesn't offer any facility to install the divider.</p>
    </li>
</ol>
<p>Now, let's focus on the phrase</p>
<blockquote>
    <p>Since the answer may be very large, return it modulo <code>1000000007</code>.</p>
</blockquote>
<details>
    <summary> Since we need to deal with modular arithmetic, the section lists important properties of modular
        arithmetic. If readers are not familiar with these properties, they are encouraged to expand the section by
        clicking here.
    </summary>
    <p>
    </p>
    <ol>
        <li>
            <p><span class="math math-inline"><span class="katex"><span class="katex-mathml">(a+b)mod  m=((amod  m)+(bmod  m))mod  m(a + b) \mod m = ((a \mod m) + (b \mod m)) \mod m</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                      style="margin-right: 0.2222em;"></span><span
                    class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.6944em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">((</span><span class="mord mathnormal">a</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.2222em;"></span><span
                    class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">b</span><span
                    class="mspace allowbreak"></span><span class="mspace" style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">))</span><span
                    class="mspace allowbreak"></span><span class="mspace" style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                    class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                         style="margin-right: 0.1667em;"></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>
            </p>
            <p>In programming, <code>(a + b) % m = ((a % m) + (b % m)) % m</code></p>
        </li>
        <li>
            <p><span class="math math-inline"><span class="katex"><span class="katex-mathml">(a−b)mod  m=((amod  m)−(bmod  m)+m)mod  m(a - b) \mod m = ((a \mod m) - (b \mod m) + m) \mod m</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                      style="margin-right: 0.2222em;"></span><span
                    class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.6944em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">((</span><span class="mord mathnormal">a</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.2222em;"></span><span
                    class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">b</span><span
                    class="mspace allowbreak"></span><span class="mspace" style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.2222em;"></span><span
                    class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.6944em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span></span></span></span></span></p>
            <p>In programming, <code>(a - b) % m = ((a % m) - (b % m) + m) % m</code></p>
            <p>The <span class="math math-inline"><span class="katex"><span class="katex-mathml">mm</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 0.4306em;"></span><span
                    class="mord mathnormal">m</span></span></span></span></span> is added to avoid downflowing to a
                negative value.</p>
            <blockquote>
                <p>Let's write <span class="math math-inline"><span class="katex"><span class="katex-mathml">(a−b)mod  m=(amod  m−bmod  m)mod  m(a - b)\mod m = (a\mod m - b\mod m)\mod m</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                          style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal">b</span><span class="mclose">)</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span
                        class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
                        class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord mathnormal">a</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mclose">)</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span></span></span></span></span> and assume <span
                        class="math math-inline"><span class="katex"><span
                        class="katex-mathml">a&gt;ba &gt; b</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut"
                                           style="height: 0.5782em; vertical-align: -0.0391em;"></span><span
                        class="mord mathnormal">a</span><span class="mspace"
                                                              style="margin-right: 0.2778em;"></span><span class="mrel">&gt;</span><span
                        class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span
                        class="mord mathnormal">b</span></span></span></span></span>.<br>
                    It might happen that after taking <span class="math math-inline"><span class="katex"><span
                            class="katex-mathml">mod\text{mod}</span><span class="katex-html" aria-hidden="true"><span
                            class="base"><span class="strut" style="height: 0.6944em;"></span><span
                            class="mord text"><span class="mord">mod</span></span></span></span></span></span>, the
                    value <span class="math math-inline"><span class="katex"><span
                            class="katex-mathml">amod  ma\mod m</span><span class="katex-html" aria-hidden="true"><span
                            class="base"><span class="strut" style="height: 0.4306em;"></span><span
                            class="mord mathnormal">a</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                                         style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                            class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                                 style="margin-right: 0.1667em;"></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>
                    is smaller than <span class="math math-inline"><span class="katex"><span class="katex-mathml">bmod  mb\mod m</span><span
                            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                           style="height: 0.6944em;"></span><span
                            class="mord mathnormal">b</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                                         style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                            class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                                 style="margin-right: 0.1667em;"></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>.
                    In that case, we need to add <span class="math math-inline"><span class="katex"><span
                            class="katex-mathml">mm</span><span class="katex-html" aria-hidden="true"><span
                            class="base"><span class="strut" style="height: 0.4306em;"></span><span
                            class="mord mathnormal">m</span></span></span></span></span>. Thus <span
                            class="math math-inline"><span class="katex"><span class="katex-mathml">(a−b)mod  m=(amod  m−bmod  m+m)mod  m(a - b)\mod m = (a\mod m - b\mod m + m)\mod m</span><span
                            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
                            class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                              style="margin-right: 0.2222em;"></span><span
                            class="mbin">−</span><span class="mspace"
                                                       style="margin-right: 0.2222em;"></span></span><span class="base"><span
                            class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                            class="mord mathnormal">b</span><span class="mclose">)</span><span
                            class="mspace allowbreak"></span><span class="mspace"
                                                                   style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                            class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                                 style="margin-right: 0.1667em;"></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span><span
                            class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span
                            class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
                            class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                            class="mopen">(</span><span class="mord mathnormal">a</span><span
                            class="mspace allowbreak"></span><span class="mspace"
                                                                   style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut"
                                               style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                            class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                        style="margin-right: 0.1667em;"></span><span
                            class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                            class="mbin">−</span><span class="mspace"
                                                       style="margin-right: 0.2222em;"></span></span><span class="base"><span
                            class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span><span
                            class="mspace allowbreak"></span><span class="mspace"
                                                                   style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut"
                                               style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                            class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                        style="margin-right: 0.1667em;"></span><span
                            class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                            class="mbin">+</span><span class="mspace"
                                                       style="margin-right: 0.2222em;"></span></span><span class="base"><span
                            class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                            class="mord mathnormal">m</span><span class="mclose">)</span><span
                            class="mspace allowbreak"></span><span class="mspace"
                                                                   style="margin-right: 0.6667em;"></span></span><span
                            class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                            class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                                 style="margin-right: 0.1667em;"></span><span
                            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>.
                </p>
            </blockquote>
            <p><strong>Example:</strong> Let <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">a=6a = 6</span><span class="katex-html" aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 0.4306em;"></span><span
                    class="mord mathnormal">a</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span></span></span></span></span>,
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">b=4b = 4</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.6944em;"></span><span
                        class="mord mathnormal">b</span><span class="mspace"
                                                              style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span
                        class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6444em;"></span><span class="mord">4</span></span></span></span></span>,
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">m=5m = 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.4306em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span
                        class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6444em;"></span><span class="mord">5</span></span></span></span></span>.
                Thus, <span class="math math-inline"><span class="katex"><span class="katex-mathml">(a−b)mod  m(a - b)\mod m</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                          style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal">b</span><span class="mclose">)</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span></span></span></span></span> will be <span
                        class="math math-inline"><span class="katex"><span class="katex-mathml">22</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.6444em;"></span><span
                        class="mord">2</span></span></span></span></span>. Now, if we do<br>
                = <span class="math math-inline"><span class="katex"><span class="katex-mathml">(amod  m−bmod  m)mod  5(a\mod m - b\mod m) \mod 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord mathnormal">a</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mclose">)</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span>,
                then it will be<br>
                = <span class="math math-inline"><span class="katex"><span class="katex-mathml">(6mod  5−4mod  5)mod  5(6\mod 5 - 4\mod 5) \mod 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord">6</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord">5</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6444em;"></span><span
                        class="mord">4</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                          style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord">5</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord"><span class="mord"><span
                        class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                          style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span><br>
                = <span class="math math-inline"><span class="katex"><span class="katex-mathml">(1−4)mod  5(1 - 4) \mod 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord">1</span><span class="mspace"
                                                                               style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord">4</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord"><span class="mord"><span
                        class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                          style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span><br>
                = <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">(−3)mod  5(-3) \mod 5</span><span class="katex-html"
                                                                               aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord">−</span><span class="mord">3</span><span
                        class="mclose">)</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                            style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span>
            </p>
            <p>The value <code>(-3) % 5</code> will be evaluated to <code>-3</code> in Programming Languages like Java.
            </p>
            <blockquote>
                <p>However, in Python3, it will come out to be <code>2</code>. Programming Languages deal with negative
                    integer division differently.</p>
            </blockquote>
            <p>Thus, to avoid this, we need to add <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">mm</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                    class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>.
                Hence, the final answer will be<br>
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">=(amod  m−bmod  m+m)mod  m= (a\mod m - b\mod m + m)\mod m</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.3669em;"></span><span
                        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord mathnormal">a</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span><span class="mspace"
                                                              style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord mathnormal">m</span><span class="mclose">)</span><span
                        class="mspace allowbreak"></span><span class="mspace"
                                                               style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span
                        class="mord mathnormal">m</span></span></span></span></span><br>
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">=(6mod  5−4mod  5+5)mod  5= (6\mod 5 - 4\mod 5 + 5)\mod 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.3669em;"></span><span
                        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord">6</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord">5</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6444em;"></span><span
                        class="mord">4</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                          style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                    style="margin-right: 0.1667em;"></span><span
                        class="mord">5</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord">5</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord"><span class="mord"><span
                        class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                          style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span><br>
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">=(1−4+5)mod  5= (1 - 4 + 5)\mod 5</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.3669em;"></span><span
                        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mopen">(</span><span class="mord">1</span><span class="mspace"
                                                                               style="margin-right: 0.2222em;"></span><span
                        class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut"
                                           style="height: 0.7278em; vertical-align: -0.0833em;"></span><span
                        class="mord">4</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                        class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                        class="mord">5</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                        class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6944em;"></span><span class="mord"><span class="mord"><span
                        class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                          style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span><br>
                <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">=2mod  5= 2\mod 5</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 0.3669em;"></span><span
                        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6444em;"></span><span
                        class="mord">2</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                          style="margin-right: 0.6667em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                        class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                             style="margin-right: 0.1667em;"></span><span
                        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span></span></span></span></span><br>
                <span class="math math-inline"><span class="katex"><span class="katex-mathml">=2= 2</span><span
                        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                       style="height: 0.3669em;"></span><span
                        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                        class="base"><span class="strut" style="height: 0.6444em;"></span><span
                        class="mord">2</span></span></span></span></span></p>
        </li>
        <li>
            <p><span class="math math-inline"><span class="katex"><span class="katex-mathml">(a⋅b)mod  m=((amod  m)⋅(bmod  m))mod  m(a \cdot b) \mod m = ((a \mod m) \cdot (b \mod m)) \mod m</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                      style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.6944em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">((</span><span class="mord mathnormal">a</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">b</span><span
                    class="mspace allowbreak"></span><span class="mspace" style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose">))</span><span
                    class="mspace allowbreak"></span><span class="mspace" style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                    class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                         style="margin-right: 0.1667em;"></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>
            </p>
            <p>In programming, <code>(a * b) % m = ((a % m) * (b % m)) % m</code></p>
        </li>
        <li>
            <p><span class="math math-inline"><span class="katex"><span class="katex-mathml">(ab)mod  m=((amod  m)b)mod  m(a^b) \mod m = ((a \mod m)^b) \mod m</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1.0991em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span
                    class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                      style="height: 0.8491em;"><span
                    style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                       style="height: 2.7em;"></span><span
                    class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span
                    class="mclose">)</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                        style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                    class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                         style="margin-right: 0.1667em;"></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span><span
                    class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span
                    class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">((</span><span class="mord mathnormal">a</span><span class="mspace allowbreak"></span><span
                    class="mspace" style="margin-right: 0.6667em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1.0991em; vertical-align: -0.25em;"></span><span
                    class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mspace"
                                                                                style="margin-right: 0.1667em;"></span><span
                    class="mord mathnormal">m</span><span class="mclose"><span class="mclose">)</span><span
                    class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                      style="height: 0.8491em;"><span
                    style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                       style="height: 2.7em;"></span><span
                    class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span
                    class="mclose">)</span><span class="mspace allowbreak"></span><span class="mspace"
                                                                                        style="margin-right: 0.6667em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord"><span
                    class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                                         style="margin-right: 0.1667em;"></span><span
                    class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span></span>
            </p>
        </li>
    </ol>
    <p></p></details>
<br>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">↓Section&nbsp;after&nbsp;propeties&nbsp;of&nbsp;modular&nbsp;arithmetic\downarrow_{\text{Section after propeties of modular arithmetic}}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 0.9805em; vertical-align: -0.2861em;"></span><span
        class="mrel"><span class="mrel">↓</span><span class="msupsub"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span
        style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut"
                                                                            style="height: 2.7em;"></span><span
        class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span
        class="mord mtight">Section&nbsp;after&nbsp;propeties&nbsp;of&nbsp;modular&nbsp;arithmetic</span></span></span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>
</p>
<p>With a few important facts being established, let's move on to the solution.</p>
<hr>
<h3 id="approach-1-top-down-dynamic-programming">Approach 1: Top-Down Dynamic Programming</h3>
<h4 id="intuition">Intuition</h4>
<p>Let's try to count the number of ways to divide the <code>corridor</code>, by analyzing the arrangement of
    <code>S</code> and <code>P</code> from left to right. We will put weight on the fact that</p>
<blockquote>
    <p>"Plants <code>P</code> offer flexibility to install the divider in <strong>different</strong> ways".</p>
    <p>Let's analyze this with three different ways to install the divider when there were 4 <code>S</code> in the
        <code>corridor</code>, and two <code>P</code> in between the second and third <code>S</code>.</p>
    <p>In this case, the yellow plant took the responsibility of installing the divider after confirming that two <code>S</code>
        are there in the section.<br>
        <img src="Slide4_1.PNG" alt="fourS_2P1" style="height: 75px;"></p>
    <p>In this case, the yellow plant passes the baton to the next index. The pink plant took the responsibility of
        installing the divider after confirming that two <code>S</code> were there in the section.<br>
        <img src="Slide4_2.PNG" alt="fourS_2P2" style="height: 75px;"></p>
    <p>In this case, the pink plant passed after receiving the baton from the yellow plant again passed the baton to the
        next index. The next index is a seat, and in fact, the third <code>S</code>, thus it cannot be part of the
        received baton's section. Thus, it installed the divider after realizing that there were already two
        <code>S</code> in the section.<br>
        <img src="Slide4_3.PNG" alt="fourS_2P3" style="height: 75px;"></p>
    <p>Thus, every plant, in general, has two options after realizing that there are two <code>S</code> in the growing
        section. These options produce <strong>different</strong> ways to divide the <code>corridor</code>.</p>
</blockquote>
<p>Initially, we have a pre-installed divider before index <code>0</code>, and we are in the first section, which we can
    close only when we find a pair of <code>S</code> while scanning from left to right.</p>
<p>Thus, for formulating, let's use</p>
<ul>
    <li>
        <p><code>index</code> to denote the index of the current element in the <code>corridor</code>, and</p>
    </li>
    <li>
        <p><code>seats</code> to denote the number of <code>S</code> in the current section. The <code>seats</code> can
            take only a limited number of values.</p>
        <ul>
            <li>
                <p><code>0</code> if there is no <code>S</code> in the current section</p>
            </li>
            <li>
                <p><code>1</code> if there is only one <code>S</code> in the current section</p>
            </li>
            <li>
                <p><code>2</code> if there are two <code>S</code> in the current section.</p>
                <ul>
                    <li>
                        <p>if we close the section here, it means that for the next section, we will have <code>0</code>
                            <code>S</code> remaining.</p>
                    </li>
                    <li>
                        <p>if we don't close, then we can keep growing the section until we find another <code>S</code>,
                            then the moment we find more than two <code>S</code> in the current section, we have to
                            start a new section, and the <code>S</code> in the new section will be <code>1</code>.</p>
                    </li>
                </ul>
                <p>Thus, because of formulation, we can say that the <code>seats</code> can take only three values,
                    <code>0</code>, <code>1</code>, and <code>2</code>.</p>
            </li>
        </ul>
    </li>
</ul>
<p>Thus, with these notations, let's try to compute the number of ways to divide the <code>corridor</code> as a function
    of <code>index</code> and <code>seats</code>.</p>
<p>More precisely, we will define a function <code>count(index, seats)</code> to denote the number of ways to divide the
    <code>corridor</code> starting from index <code>index</code> to the last index, with <code>seats</code> number of
    <code>S</code> in the current section.</p>
<ul>
    <li>
        <p>if <code>index</code> reaches <code>n</code> (the <code>corridor.length()</code>), then the current section
            is valid only if <code>seats == 2</code>.</p>
        <p>Thus, if <code>index == n</code>, we can return <code>1</code> if <code>seats == 2</code>, otherwise we can
            return <code>0</code>. This additional <code>1</code> implies that we have found a valid way to divide the
            <code>corridor</code>. We will ensure not to count the same way again, by ensuring that the <code>(i1,
                s1)</code> pair calls <code>count(i2, s2)</code> not more than once.</p>
    </li>
    <li>
        <p>now if we are on a valid index, and the number of seats in the current sections is <strong>exactly</strong>
            <code>2</code>, then we either can close the section, or we can keep growing the section. It depends on
            whether <code>corridor[index]</code> is <code>S</code> or <code>P</code>.</p>
        <ul>
            <li>
                <p>if <code>corridor[index]</code> is <code>S</code>, then we have to close the section and start a new
                    section from this index. Thus, we need to call <code>count</code> for the next index, with <code>seats
                        = 1</code>. Hence, return <code>count(index + 1, 1)</code></p>
            </li>
            <li>
                <p>if <code>corridor[index]</code> is <code>P</code>, then we have two options, and both of these
                    options will generate <strong>different</strong> ways to divide the <code>corridor</code>.</p>
                <ul>
                    <li>
                        <p><em>close the section:</em> then at the next index, we will have <code>seats = 0</code>.</p>
                    </li>
                    <li>
                        <p><em>keep growing the section:</em> then at the next index, we will have <code>seats =
                            2</code> only.</p>
                    </li>
                </ul>
                <p>Hence, return <code>count(index + 1, 0) + count(index + 1, 2)</code></p>
            </li>
        </ul>
    </li>
    <li>
        <p>lastly, if we are on a valid index, but number of seats in the current section is less than <code>2</code>,
            then we don't have any option but to keep growing the section.</p>
        <ul>
            <li>
                <p>if <code>corridor[index]</code> is <code>S</code>, the number of seats in the section will be
                    incremented. Hence, return <code>count(index + 1, seats + 1)</code></p>
            </li>
            <li>
                <p>if <code>corridor[index]</code> is <code>P</code>, then return <code>count(index + 1, seats)</code>
                </p>
            </li>
        </ul>
    </li>
</ul>
<p>We would call <code>count(0, 0)</code> to compute the number of ways to divide the <code>corridor</code> starting
    from index <code>0</code> to the last index, with <code>0</code> number of <code>S</code> in the current section.
</p>
<p>Now, we can see that the function <code>count</code> is a recursive function. There might be a case when one
    sub-problem is called multiple times. The following tree illustrates one such case for <code>corridor</code> as
    <code>"SSPPSPS"</code></p>
<blockquote>
    <p><img src="Slide5.PNG" alt="recursionTree"></p>
    <p>The same color-coded rectangles denote the same sub-problems. In general, we call two sub-problems when <code>corridors[index]
        == P</code> and <code>seats == 2</code></p>
    <p>At <code>(2, 2)</code> we call <code>(3, 0)</code> to close the section, and <code>(3, 2)</code> to keep growing
        the section.</p>
    <ul>
        <li>At <code>(3, 0)</code> we call <code>(4, 0)</code> to grow the section. We can't close the section because
            we have <code>0</code> <code>S</code> in the current section.
        </li>
        <li>At <code>(3, 2)</code> we call <code>(4, 0)</code> to close the section, and <code>(4, 2)</code> to keep
            growing the section.
        </li>
    </ul>
    <p>Thus, we can see that <code>(4, 0)</code> is called twice.</p>
</blockquote>
<p>Although we might call the same sub-problem multiple times, we aren't double counting the same way to divide the
    <code>corridor</code>. The count is incremented at the leaf nodes, and the leaf nodes with <code>seats == 2</code>
    represent a unique way to divide the <code>corridor</code>.</p>
<p>Still, computing these overlapping sub-problems again and again is not efficient.</p>
<p><strong>What if we store the result of each sub-problem and use it when required?</strong> This is what we do in
    dynamic programming. We store the result of each sub-problem and use it when required. Thus, instead of solving the
    same sub-problem again and again, we can store the result of each sub-problem and use it whenever required.</p>
<blockquote>
    <p>Dynamic programming is a programming paradigm in which we break a problem into sub-problems store the result of
        each sub-problem and use it when required. To dive deep into dynamic programming, readers can visit <a
                href="https://leetcode.com/explore/featured/card/dynamic-programming/" target="_blank"><strong>Dynamic
            Programming Explore Card</strong></a>.</p>
</blockquote>
<p>Since there are two state variables <code>index</code> and <code>seats</code>, we can use a two-dimensional array (or
    a hash map) to store the result of each sub-problem.</p>
<blockquote>
    <p>If there are <span class="math math-inline"><span class="katex"><span class="katex-mathml">TT</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 0.6833em;"></span><span
            class="mord mathnormal" style="margin-right: 0.13889em;">T</span></span></span></span></span> state
        variables, then we need an array of at most <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">TT</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                     style="margin-right: 0.13889em;">T</span></span></span></span></span>
        dimensions to store the result of each sub-problem.</p>
</blockquote>
<p><strong>What will be the size of the array?</strong> The size of the array will be the range of each state variable.
</p>
<ul>
    <li><code>index</code> can take values from <code>0</code> to <code>n - 1</code>, where <code>n</code> is the length
        of the <code>corridor</code>. Thus, there can be <code>n</code> rows in the memoization array. <code>index ==
            n</code> is the base case, and need not be stored in the memoization array.
    </li>
    <li><code>seats</code> can take values from <code>0</code> to <code>2</code>. Thus, there can be <code>3</code>
        columns in the memoization array.
    </li>
</ul>
<p>There is no hard-and-fast rule to use a two-dimensional array. We may use a hash map to cache the result of each
    sub-problem. The key of the hash map would be the pair <code>(index, seats)</code>, and the value would be the
    result of the sub-problem.</p>
<p>Readers are encouraged to implement the solution on their own. Make sure to take modulo <code>1000000007</code> while
    storing the result in the <code>cache</code> array. We will exploit properties of modular arithmetic as discussed in
    the <a href="#overview" rel="noopener noreferrer nofollow ugc" target="_self">overview</a> section.</p>
<h4 id="algorithm">Algorithm</h4>
<ol>
    <li>
        <p>Store <code>1000000007</code> in the variable <code>MOD</code> for convenience. It is a good practice to
            store constants.</p>
    </li>
    <li>
        <p>Initialize a two-dimensional array <code>cache</code> of size <code>n</code> rows and <code>3</code> columns.
            Initialize each element of the array to <code>-1</code>. We will use this array to cache the result of each
            sub-problem. Alternatively, we can use a hash map to cache the result of each sub-problem.</p>
    </li>
    <li>
        <p>Define a function <code>count</code> which takes two arguments <code>index</code> and <code>seats</code>. It
            can have other arguments as well to access the required variables.</p>
        <ul>
            <li>
                <p>If <code>index</code> is equal to <code>n</code>, then the current section is valid only if <code>seats</code>
                    is equal to <code>2</code>. Thus, return <code>1</code> if <code>seats == 2</code>, otherwise return
                    <code>0</code>.</p>
            </li>
            <li>
                <p>If <code>cache[index][seats]</code> is not equal to <code>-1</code>, then return <code>cache[index][seats]</code>.
                    This implies that we have already computed the result of this sub-problem, and we can return the
                    cached result.</p>
            </li>
            <li>
                <p>If the current section has <code>seats == 2</code></p>
                <ul>
                    <li>If <code>corridor[index]</code> is <code>S</code>, then we have to close the section and start a
                        new section from this index. Thus, return <code>count(index + 1, 1)</code></li>
                    <li>If <code>corridor[index]</code> is <code>P</code>, then we have the option to close or to keep
                        growing the section. Thus, return <code>(count(index + 1, 0) + count(index + 1, 2)) % MOD</code>
                    </li>
                </ul>
            </li>
            <li>
                <p>If the current section has <code>seats &lt; 2</code>, then we have to keep growing the section.</p>
                <ul>
                    <li>If <code>corridor[index]</code> is <code>S</code>, then return <code>count(index + 1, seats +
                        1)</code></li>
                    <li>If <code>corridor[index]</code> is <code>P</code>, then return <code>count(index + 1,
                        seats)</code></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>Call the function <code>count</code> with <code>index = 0</code> and <code>seats = 0</code>. Return the
            result of the function call.</p>
    </li>
</ol>
<h4 id="implementation">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
    // Store 1000000007 in a variable for convenience
    private static final int MOD = 1_000_000_007;

    // Count the number of ways to divide from "index" to the last index
    // with "seats" number of "S" in the current section
    private int count(int index, int seats, String corridor, Map<Pair<Integer, Integer>, Integer> cache) {
        // If we have reached the end of the corridor, then
        // the current section is valid only if "seats" is 2
        if (index == corridor.length()) {
            return seats == 2 ? 1 : 0;
        }

        // If we have already computed the result of this sub-problem,
        // then return the cached result
        if (cache.containsKey(new Pair<>(index, seats))) {
            return cache.get(new Pair<>(index, seats));
        }

        // Result of the sub-problem
        int result = 0;

        // If the current section has exactly 2 "S"
        if (seats == 2) {
            // If the current element is "S", then we have to close the
            // section and start a new section from this index. Next index
            // will have one "S" in the current section
            if (corridor.charAt(index) == 'S') {
                result = count(index + 1, 1, corridor, cache);
            } else {
                // If the current element is "P", then we have two options
                // 1. Close the section and start a new section from this index
                // 2. Keep growing the section
                result = (count(index + 1, 0, corridor, cache) + count(index + 1, 2, corridor, cache)) % MOD;
            }
        } else {
            // Keep growing the section. Increment "seats" if present
            // element is "S"
            if (corridor.charAt(index) == 'S') {
                result = count(index + 1, seats + 1, corridor, cache);
            } else {
                result = count(index + 1, seats, corridor, cache);
            }
        }

        // Memoize the result, and return it
        cache.put(new Pair<>(index, seats), result);
        return result;
    }


    public int numberOfWays(String corridor) {
        // Cache the result of each sub-problem
        Map<Pair<Integer, Integer>, Integer> cache = new HashMap<>();

        // Call the count function
        return count(0, 0, corridor, cache);
    }
}
    </code>
    C++
    <code>
     class Solution {
public:
    // Store 1000000007 in a variable for convenience
    const int MOD = 1e9 + 7;

    // Count the number of ways to divide from "index" to the last index
    // with "seats" number of "S" in the current section
    int count(int index, int seats, string& corridor, int cache[][3]) {
        // If we have reached the end of the corridor, then
        // the current section is valid only if "seats" is 2
        if (index == corridor.length()) {
            return seats == 2 ? 1 : 0;
        }

        // If we have already computed the result of this sub-problem,
        // then return the cached result
        if (cache[index][seats] != -1) {
            return cache[index][seats];
        }

        // Result of the sub-problem
        int result = 0;

        // If the current section has exactly 2 "S"
        if (seats == 2) {
            // If the current element is "S", then we have to close the
            // section and start a new section from this index. Next index
            // will have one "S" in the current section
            if (corridor[index] == 'S') {
                result = count(index + 1, 1, corridor, cache);
            } else {
                // If the current element is "P", then we have two options
                // 1. Close the section and start a new section from this index
                // 2. Keep growing the section
                result = (count(index + 1, 0, corridor, cache) + count(index + 1, 2, corridor, cache)) % MOD;
            }
        } else {
            // Keep growing the section. Increment "seats" if present
            // element is "S"
            if (corridor[index] == 'S') {
                result = count(index + 1, seats + 1, corridor, cache);
            } else {
                result = count(index + 1, seats, corridor, cache);
            }
        }

        // Memoize the result, and return it
        cache[index][seats] = result;
        return cache[index][seats];
    }

    int numberOfWays(string corridor) {
        // Cache the result of each sub-problem
        int cache[corridor.length()][3];
        memset(cache, -1, sizeof(cache));

        // Call the count function
        return count(0, 0, corridor, cache);
    }
};
    </code>
    C
    <code>
        // Count the number of ways to divide from "index" to the last index
// with "seats" number of "S" in the current section
int count(int index, int seats, char * corridor, int cache[][3]) {
    // If we have reached the end of the corridor, then
    // the current section is valid only if "seats" is 2
    if (index == strlen(corridor)) {
        return seats == 2 ? 1 : 0;
    }

    // If we have already computed the result of this sub-problem,
    // then return the cached result
    if (cache[index][seats] != -1) {
        return cache[index][seats];
    }

    // Result of the sub-problem
    int result = 0;

    // If the current section has exactly 2 "S"
    if (seats == 2) {
        // If the current element is "S", then we have to close the
        // section and start a new section from this index. Next index
        // will have one "S" in the current section
        if (corridor[index] == 'S') {
            result = count(index + 1, 1, corridor, cache);
        } else {
            // If the current element is "P", then we have two options
            // 1. Close the section and start a new section from this index
            // 2. Keep growing the section
            result = (count(index + 1, 0, corridor, cache) + count(index + 1, 2, corridor, cache)) % 1000000007;
        }
    } else {
        // Keep growing the section. Increment "seats" if present
        // element is "S"
        if (corridor[index] == 'S') {
            result = count(index + 1, seats + 1, corridor, cache);
        } else {
            result = count(index + 1, seats, corridor, cache);
        }
    }

    // Memoize the result, and return it
    cache[index][seats] = result;
    return cache[index][seats];
}

int numberOfWays(char * corridor){
    // Cache the result of each sub-problem
    int cache[strlen(corridor)][3];
    memset(cache, -1, sizeof(cache));

    // Call the count function
    return count(0, 0, corridor, cache);
}
    </code>
    Python3
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Cache the result of each sub-problem
        cache = [[-1] * 3 for _ in range(len(corridor))]

        # Count the number of ways to divide from "index" to the last index
        # with "seats" number of "S" in the current section
        def count(index, seats):
            # If we have reached the end of the corridor, then
            # the current section is valid only if "seats" is 2
            if index == len(corridor):
                return 1 if seats == 2 else 0

            # If we have already computed the result of this sub-problem,
            # then return the cached result
            if cache[index][seats] != -1:
                return cache[index][seats]

            # If the current section has exactly 2 "S"
            if seats == 2:
                # If the current element is "S", then we have to close the
                # section and start a new section from this index. Next index
                # will have one "S" in the current section
                if corridor[index] == "S":
                    result = count(index + 1, 1)
                else:
                    # If the current element is "P", then we have two options
                    # 1. Close the section and start a new section from this index
                    # 2. Keep growing the section
                    result = (count(index + 1, 0) + count(index + 1, 2)) % MOD
            else:
                # Keep growing the section. Increment "seats" if present
                # element is "S"
                if corridor[index] == "S":
                    result = count(index + 1, seats + 1)
                else:
                    result = count(index + 1, seats)

            # Memoize the result, and return it
            cache[index][seats] = result
            return cache[index][seats]

        # Call the count function
        return count(0, 0)
    </code>
</pre>
<p><strong>Implementation Notes</strong></p>
<ol>
    <li>
        <p>The Python, C, and C++ implementation uses a two-dimensional array. The Java and JavaScript implementation
            uses a hash map.</p>
    </li>
    <li>
        <p>In the <code>cache</code>, we will store the result, which is less than <code>1000000007</code>. Now, when we
            are adding two such results <em>(in the case when <code>corridors[index] == P</code> and <code>seats ==
                2</code>)</em>, then we need to take modulo <code>1000000007</code> again because the sum of two numbers
            less than <code>1000000007</code> can be greater than <code>1000000007</code>.</p>
        <p>It's worth noting that the sum of two numbers less than <code>1000000007</code> can be at most <code>2000000012</code>
            which is less than <code>INT_MAX</code>. Hence, we need not to worry about overflow when only two numbers
            are added.</p>
    </li>
</ol>
<h4 id="complexity-analysis">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">NN</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                                style="margin-right: 0.10903em;">N</span></span></span></span></span>
    be the length of the <code>corridor</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are calling the function <code>count</code> for each <code>index</code> with constant three possible
            values of <code>seats</code>. Thus, there will be at most <span class="math math-inline"><span
                    class="katex"><span class="katex-mathml">3N3N</span><span class="katex-html"
                                                                              aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">3</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span></span></span></span></span>
            function calls. Each function call computes the result in constant time. Thus, the time complexity will be
            <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">O(3N)⋅O(1)O(3N) \cdot O(1)</span><span class="katex-html"
                                                                                aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">3</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are using a two-dimensional array of size <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">N×3N \times 3</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 0.7667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal"
                                                                                                style="margin-right: 0.10903em;">N</span><span
                class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace"
                                                                                                       style="margin-right: 0.2222em;"></span></span><span
                class="base"><span class="strut" style="height: 0.6444em;"></span><span
                class="mord">3</span></span></span></span></span> to cache the result of each sub-problem. Thus, the
            space complexity will be <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(N⋅3)O(N \cdot 3)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mspace"
                                                                                           style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord">3</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
</ul>
<hr>
<h3 id="approach-2-bottom-up-dynamic-programming">Approach 2: Bottom-up Dynamic Programming</h3>
<h4 id="intuition-1">Intuition</h4>
<p>Let's transform the recursive solution into an iterative solution.</p>
<p>For this let's write the mathematical recurrence for the problem.</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,seats)\text{count}(index, seats)</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span> represents the number
    of ways to divide the <code>corridor</code> starting from index <code>index</code> to the last index, with <code>seats</code>
    number of <code>S</code> in the current section. The equation for the recurrence (which is often called the Bellman
    equation) is</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,seats)={1if&nbsp;index=corridor.length&nbsp;and&nbsp;seats=20if&nbsp;index=corridor.length&nbsp;and&nbsp;seats&lt;2count(index+1,1)if&nbsp;seats=2&nbsp;and&nbsp;corridor[index]=Scount(index+1,0)+count(index+1,2)if&nbsp;seats=2&nbsp;and&nbsp;corridor[index]=Pcount(index+1,seats+1)if&nbsp;seats&lt;2&nbsp;and&nbsp;corridor[index]=Scount(index+1,seats)if&nbsp;seats&lt;2&nbsp;and&nbsp;corridor[index]=P\text{count}(index, seats) = \begin{cases} 1 &amp; \text{if } index = corridor.length \text{ and } seats = 2 \\ 0 &amp; \text{if } index = corridor.length \text{ and } seats &lt; 2 \\ \\ \text{count}(index + 1, 1) &amp; \text{if } seats = 2 \text{ and } corridor[index] = S \\ \text{count}(index + 1, 0) + \text{count}(index + 1, 2) &amp; \text{if } seats = 2 \text{ and } corridor[index] = P \\ \text{count}(index + 1, seats + 1) &amp; \text{if } seats &lt; 2 \text{ and } corridor[index] = S \\ \text{count}(index + 1, seats) &amp; \text{if } seats &lt; 2 \text{ and } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace"
                                                                           style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 10.08em; vertical-align: -4.79em;"></span><span class="minner"><span class="mopen"><span
        class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"
                                                                                            style="height: 5.05em;"><span
        style="top: -1.366em;"><span class="pstrut" style="height: 5.016em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.358em;"><span
        class="pstrut" style="height: 5.016em;"></span><span style="height: 3.016em; width: 0.8889em;"><svg
        width="0.8889em" height="3.016em" viewBox="0 0 888.89 3016" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V3016 H384z M384 0 H504 V3016 H384z"></path></svg></span></span><span
        style="top: -5.016em;"><span class="pstrut" style="height: 5.016em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -6.158em;"><span
        class="pstrut" style="height: 5.016em;"></span><span style="height: 3.016em; width: 0.8889em;"><svg
        width="0.8889em" height="3.016em" viewBox="0 0 888.89 3016" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V3016 H384z M384 0 H504 V3016 H384z"></path></svg></span></span><span
        style="top: -9.166em;"><span class="pstrut" style="height: 5.016em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 4.55em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 5.29em;"><span style="top: -7.29em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">1</span></span></span><span style="top: -5.85em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"><span class="mord">0</span></span></span><span style="top: -4.41em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.97em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: -1.53em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">0</span><span class="mclose">)</span><span class="mspace"
                                                                style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord text"><span
        class="mord">count</span></span><span class="mopen">(</span><span class="mord mathnormal">in</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span
        class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">2</span><span class="mclose">)</span></span></span><span style="top: -0.09em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord mathnormal">se</span><span class="mord mathnormal">a</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: 1.35em;"><span class="pstrut"
                                                                                                         style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord mathnormal">se</span><span class="mord mathnormal">a</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span
        class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span
        class="vlist" style="height: 4.79em;"><span></span></span></span></span></span><span class="arraycolsep"
                                                                                             style="width: 1em;"></span><span
        class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"
                                                                                       style="height: 5.29em;"><span
        style="top: -7.29em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">if&nbsp;</span></span><span class="mord mathnormal">in</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span
        class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord text"><span
        class="mord">&nbsp;and&nbsp;</span></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mord">2</span></span></span><span style="top: -5.85em;"><span class="pstrut"
                                                                             style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord text"><span
        class="mord">&nbsp;and&nbsp;</span></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mord">2</span></span></span><span
        style="top: -2.97em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">if&nbsp;</span></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mord">2</span><span class="mord text"><span class="mord">&nbsp;and&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -1.53em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">se</span><span class="mord mathnormal">a</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mord">2</span><span class="mord text"><span class="mord">&nbsp;and&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span><span style="top: -0.09em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">se</span><span class="mord mathnormal">a</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mord">2</span><span class="mord text"><span class="mord">&nbsp;and&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: 1.35em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">se</span><span class="mord mathnormal">a</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mord">2</span><span class="mord text"><span class="mord">&nbsp;and&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 4.79em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>Let's break this recurrence for every possible value of <span class="math math-inline"><span class="katex"><span
        class="katex-mathml">seatsseats</span><span class="katex-html" aria-hidden="true"><span class="base"><span
        class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">se</span><span
        class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span
        class="mord mathnormal">s</span></span></span></span></span> separately. Thus, we can have the following three
    recurrences.</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,0)={0if&nbsp;index=corridor.lengthcount(index+1,1)if&nbsp;corridor[index]=Scount(index+1,0)if&nbsp;corridor[index]=P\text{count}(index, 0) = \begin{cases} 0 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 0) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">0</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">0</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">0</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,1)={0if&nbsp;index=corridor.lengthcount(index+1,2)if&nbsp;corridor[index]=Scount(index+1,1)if&nbsp;corridor[index]=P\text{count}(index, 1) = \begin{cases} 0 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 2) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">0</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">2</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,2)={1if&nbsp;index=corridor.lengthcount(index+1,1)if&nbsp;corridor[index]=Scount(index+1,0)+count(index+1,2)if&nbsp;corridor[index]=P\text{count}(index, 2) = \begin{cases} 1 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 0) + \text{count}(index + 1, 2) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">1</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">0</span><span class="mclose">)</span><span class="mspace"
                                                                style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord text"><span
        class="mord">count</span></span><span class="mopen">(</span><span class="mord mathnormal">in</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span
        class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">2</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>Since there are two state variables <code>index</code> and <code>seats</code>, we can use a two-dimensional array to
    store the result of each sub-problem.</p>
<p>Our agenda is to fill the array in a bottom-up fashion. We will start from the base case and then fill the array for
    the remaining sub-problems.</p>
<p>We will traverse from the last index, and fill the array for each possible value of <code>seats</code> at each <code>index</code>.
</p>
<ul>
    <li>
        <p>If <code>index = corridor.length</code>, then as per three recurrences,</p>
        <ul>
            <li>
                <p><code>count[index][0] = 0</code></p>
            </li>
            <li>
                <p><code>count[index][1] = 0</code></p>
            </li>
            <li>
                <p><code>count[index][2] = 1</code></p>
            </li>
        </ul>
    </li>
    <li>
        <p>otherwise,</p>
        <ul>
            <li>
                <p>if <code>corridor[index]</code> is <code>S</code>, then as per three recurrences,</p>
                <ul>
                    <li>
                        <p><code>count[index][0] = count[index + 1][1]</code></p>
                    </li>
                    <li>
                        <p><code>count[index][1] = count[index + 1][2]</code></p>
                    </li>
                    <li>
                        <p><code>count[index][2] = count[index + 1][1]</code></p>
                    </li>
                </ul>
            </li>
            <li>
                <p>if <code>corridor[index]</code> is <code>P</code>, then as per three recurrences,</p>
                <ul>
                    <li>
                        <p><code>count[index][0] = count[index + 1][0]</code></p>
                    </li>
                    <li>
                        <p><code>count[index][1] = count[index + 1][1]</code></p>
                    </li>
                    <li>
                        <p><code>count[index][2] = count[index + 1][0] + count[index + 1][2]</code></p>
                        <p>As discussed in <a href="#implementation" rel="noopener noreferrer nofollow ugc"
                                              target="_self">implementation note of Approach-1</a>, we need to take
                            modulo <code>1000000007</code> while saving <code>count[index][2]</code> in the actual
                            implementation.</p>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
<p>This completes the filling of the array. The result will be stored in <code>count[0][0]</code>, number of ways to
    divide the <code>corridor</code> starting from index <code>0</code> to the last index, with <code>0</code> number of
    <code>S</code> in the current section.</p>
<p>Moreover, we also get hints about the dimension of the <code>count</code> array. <code>index</code> can take values
    from <code>0</code> to <code>N</code> (where <code>N = corridor.length</code>), and <code>seats</code> can take
    values from <code>0</code> to <code>2</code>. Thus, the dimensions of the array will be <span
            class="math math-inline"><span class="katex"><span class="katex-mathml">(N+1)×3(N + 1) \times 3</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
            class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace"
                                                                                                   style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mclose">)</span><span class="mspace"
                                                                    style="margin-right: 0.2222em;"></span><span
            class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>.
</p>
<blockquote>
    <p>In the <a href="#approach-1-top-down-dynamic-programming" rel="noopener noreferrer nofollow ugc" target="_self">top-down
        approach</a>, the <code>cache</code> was of size <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">N×3N \times 3</span><span class="katex-html" aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.7667em; vertical-align: -0.0833em;"></span><span
            class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mspace"
                                                                                   style="margin-right: 0.2222em;"></span><span
            class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>.
        This is because we were not storing the case when <code>index = N</code>. In that case, we were returning
        without storing. In the bottom-up approach, we are storing the result for the case when <code>index = N</code>.
        Thus, we need to increase the size of the array by one row.</p>
    <p>It's worth noting that it is bottom-up because we are <strong>moving from the solved base case to the unsolved
        sub-problems</strong>.</p>
    <p>The order of traversal from bottom-row to up has <strong>nothing to do</strong> with the term bottom-up dynamic
        programming. Many problems require traversal in a diagonal manner. Thus, critically analyze the Bellman Equation
        to conclude the order of filling the array.</p>
</blockquote>
<blockquote>
    <p>In this particular problem, readers can appreciate that because of symmetry in defining <code>count</code>, we
        can move from top-row to bottom as well.</p>
    <ul>
        <li>our definition of <code>count</code> is that it denotes the number of ways to divide the
            <code>corridor</code> starting from index <code>index</code> to last index, with <code>seats</code> number
            of <code>S</code> in the current section.
        </li>
        <li>we can define <code>count</code> as the number of ways to divide the <code>corridor</code> starting from
            index <code>index</code> to first index, with <code>seats</code> number of <code>S</code> in the current
            section. The <code>index &lt; 0</code> will be the base case in this definition.
        </li>
    </ul>
    <p>Hence, we can see that</p>
    <ul>
        <li>Filling from the bottom row to the top can be interpreted as scanning the <code>corridor</code> from left to
            right
        </li>
        <li>Filling from top-row to bottom can be interpreted as scanning the <code>corridor</code> from right to left.
        </li>
    </ul>
    <p>Both are symmetric, and we can use either of them.</p>
</blockquote>
<p>Readers are encouraged to implement the solution on their own.</p>
<h4 id="algorithm-1">Algorithm</h4>
<ol>
    <li>
        <p>Store <code>1000000007</code> in the variable <code>MOD</code> for convenience. It is a good practice to
            store constants.</p>
    </li>
    <li>
        <p>Declare a two-dimensional array <code>count</code> of size <code>n + 1</code> rows and <code>3</code>
            columns, where <code>n</code> is the length of the <code>corridor</code>.</p>
    </li>
    <li>
        <p>Fill the base-cases</p>
        <ul>
            <li><code>count[n][0] = 0</code></li>
            <li><code>count[n][1] = 0</code></li>
            <li><code>count[n][2] = 1</code></li>
        </ul>
    </li>
    <li>
        <p>Fill the array in a bottom-up fashion, for <code>index</code> from <code>n - 1</code> to <code>0</code></p>
        <ul>
            <li>if <code>corridor[index]</code> is <code>S</code>, then
                <ul>
                    <li><code>count[index][0] = count[index + 1][1]</code></li>
                    <li><code>count[index][1] = count[index + 1][2]</code></li>
                    <li><code>count[index][2] = count[index + 1][1]</code></li>
                </ul>
            </li>
            <li>if <code>corridor[index]</code> is <code>P</code>, then
                <ul>
                    <li><code>count[index][0] = count[index + 1][0]</code></li>
                    <li><code>count[index][1] = count[index + 1][1]</code></li>
                    <li><code>count[index][2] = (count[index + 1][0] + count[index + 1][2]) % MOD</code></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>Return <code>count[0][0]</code></p>
    </li>
</ol>
<h4 id="implementation-1">Implementation</h4>
<pre>
    Java
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Initialize the array to store the result of each sub-problem
        count = [[-1] * 3 for _ in range(len(corridor) + 1)]

        # Base cases
        count[len(corridor)][0] = 0
        count[len(corridor)][1] = 0
        count[len(corridor)][2] = 1

        # Fill the array in a bottom-up fashion
        for index in range(len(corridor) - 1, -1, -1):
            if corridor[index] == "S":
                count[index][0] = count[index + 1][1]
                count[index][1] = count[index + 1][2]
                count[index][2] = count[index + 1][1]
            else:
                count[index][0] = count[index + 1][0]
                count[index][1] = count[index + 1][1]
                count[index][2] = (count[index + 1][0] + count[index + 1][2]) % MOD

        # Return the result
        return count[0][0]
    </code>
    C++
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Initialize the array to store the result of each sub-problem
        count = [[-1] * 3 for _ in range(len(corridor) + 1)]

        # Base cases
        count[len(corridor)][0] = 0
        count[len(corridor)][1] = 0
        count[len(corridor)][2] = 1

        # Fill the array in a bottom-up fashion
        for index in range(len(corridor) - 1, -1, -1):
            if corridor[index] == "S":
                count[index][0] = count[index + 1][1]
                count[index][1] = count[index + 1][2]
                count[index][2] = count[index + 1][1]
            else:
                count[index][0] = count[index + 1][0]
                count[index][1] = count[index + 1][1]
                count[index][2] = (count[index + 1][0] + count[index + 1][2]) % MOD

        # Return the result
        return count[0][0]
    </code>
    Python3
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Initialize the array to store the result of each sub-problem
        count = [[-1] * 3 for _ in range(len(corridor) + 1)]

        # Base cases
        count[len(corridor)][0] = 0
        count[len(corridor)][1] = 0
        count[len(corridor)][2] = 1

        # Fill the array in a bottom-up fashion
        for index in range(len(corridor) - 1, -1, -1):
            if corridor[index] == "S":
                count[index][0] = count[index + 1][1]
                count[index][1] = count[index + 1][2]
                count[index][2] = count[index + 1][1]
            else:
                count[index][0] = count[index + 1][0]
                count[index][1] = count[index + 1][1]
                count[index][2] = (count[index + 1][0] + count[index + 1][2]) % MOD

        # Return the result
        return count[0][0]
    </code>
</pre>
<h4 id="complexity-analysis-1">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">NN</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                                style="margin-right: 0.10903em;">N</span></span></span></span></span>
    be the length of the <code>corridor</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are linearly traversing the <code>corridor</code> from the last index to the first index. In each
            iteration, we are filling three entries of the <code>count</code> array, which will take constant time.
            Thus, the time complexity will be <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">O(N)⋅O(1)O(N) \cdot O(1)</span><span class="katex-html"
                                                                              aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are using a two-dimensional array of size <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">(N+1)×3(N + 1) \times 3</span><span class="katex-html" aria-hidden="true"><span
                class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace"
                                                                                                       style="margin-right: 0.2222em;"></span></span><span
                class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                class="mord">1</span><span class="mclose">)</span><span class="mspace"
                                                                        style="margin-right: 0.2222em;"></span><span
                class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                class="base"><span class="strut" style="height: 0.6444em;"></span><span
                class="mord">3</span></span></span></span></span> to cache the result of each sub-problem. Thus, the
            space complexity will be <span class="math math-inline"><span class="katex"><span class="katex-mathml">O((N+1)⋅3)O((N + 1) \cdot 3)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">((</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mspace"
                                                                                           style="margin-right: 0.2222em;"></span><span
                    class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord">1</span><span class="mclose">)</span><span class="mspace"
                                                                            style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord">3</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
</ul>
<hr>
<h3 id="approach-3-space-optimized-bottom-up-dynamic-programming">Approach 3: Space-Optimized Bottom-up Dynamic
    Programming</h3>
<h4 id="intuition-2">Intuition</h4>
<p>The rule of thumb is</p>
<blockquote>
    <p>If there are <span class="math math-inline"><span class="katex"><span class="katex-mathml">TT</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 0.6833em;"></span><span
            class="mord mathnormal" style="margin-right: 0.13889em;">T</span></span></span></span></span> state
        variables, then we need an array of <strong>at most</strong> <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">TT</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                     style="margin-right: 0.13889em;">T</span></span></span></span></span>
        dimensions to store the result of each sub-problem.</p>
</blockquote>
<p>The term <strong>at most</strong> is a good signal. We might be able to reduce the number of dimensions of the array
    by carefully analyzing the recurrence relation.</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,0)={0if&nbsp;index=corridor.lengthcount(index+1,1)if&nbsp;corridor[index]=Scount(index+1,0)if&nbsp;corridor[index]=P\text{count}(index, 0) = \begin{cases} 0 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 0) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">0</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">0</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">0</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,1)={0if&nbsp;index=corridor.lengthcount(index+1,2)if&nbsp;corridor[index]=Scount(index+1,1)if&nbsp;corridor[index]=P\text{count}(index, 1) = \begin{cases} 0 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 2) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">0</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">2</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,2)={1if&nbsp;index=corridor.lengthcount(index+1,1)if&nbsp;corridor[index]=Scount(index+1,0)+count(index+1,2)if&nbsp;corridor[index]=P\text{count}(index, 2) = \begin{cases} 1 &amp; \text{if } index = corridor.length \\ \\ \text{count}(index + 1, 1) &amp; \text{if } corridor[index] = S \\ \text{count}(index + 1, 0) + \text{count}(index + 1, 2) &amp; \text{if } corridor[index] = P \end{cases}</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 1em; vertical-align: -0.25em;"></span><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
        class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span><span
        class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 5.76em; vertical-align: -2.63em;"></span><span class="minner"><span
        class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span
        class="vlist" style="height: 2.95em;"><span style="top: -1.6em;"><span class="pstrut"
                                                                               style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top: -1.592em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -3.15em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top: -4.292em;"><span
        class="pstrut" style="height: 3.15em;"></span><span style="height: 0.916em; width: 0.8889em;"><svg
        width="0.8889em" height="0.916em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path
        d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top: -5.2em;"><span
        class="pstrut" style="height: 3.15em;"></span><span
        class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.45em;"><span></span></span></span></span></span></span><span
        class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord">1</span></span></span><span style="top: -3.69em;"><span class="pstrut"
                                                                                                style="height: 3.008em;"></span><span
        class="mord"></span></span><span style="top: -2.25em;"><span class="pstrut"
                                                                     style="height: 3.008em;"></span><span class="mord"><span
        class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">1</span><span class="mclose">)</span></span></span><span style="top: -0.81em;"><span class="pstrut"
                                                                                                          style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">0</span><span class="mclose">)</span><span class="mspace"
                                                                style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord text"><span
        class="mord">count</span></span><span class="mopen">(</span><span class="mord mathnormal">in</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span
        class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                style="margin-right: 0.1667em;"></span><span
        class="mord">2</span><span class="mclose">)</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span><span
        class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span
        class="vlist-r"><span class="vlist" style="height: 3.13em;"><span style="top: -5.13em;"><span class="pstrut"
                                                                                                      style="height: 3.008em;"></span><span
        class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal"
                                                                                               style="margin-right: 0.02778em;">corr</span><span
        class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.02778em;">or</span><span
        class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.01968em;">l</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal"
                                                                                    style="margin-right: 0.03588em;">g</span><span
        class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top: -2.25em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.05764em;">S</span></span></span><span style="top: -0.81em;"><span
        class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span
        class="mord mathnormal" style="margin-right: 0.02778em;">corr</span><span class="mord mathnormal">i</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.02778em;">or</span><span
        class="mopen">[</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span
        class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                               style="margin-right: 0.2778em;"></span><span
        class="mord mathnormal" style="margin-right: 0.13889em;">P</span></span></span></span><span
        class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                   style="height: 2.63em;"><span></span></span></span></span></span></span></span><span
        class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>We can appreciate that whatever may be the case</p>
<ul>
    <li><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,0)\text{count}(index, 0)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">0</span><span
            class="mclose">)</span></span></span></span></span> depends only on <span class="math math-inline"><span
            class="katex"><span class="katex-mathml">count(index+1,0)\text{count}(index + 1, 0)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">0</span><span class="mclose">)</span></span></span></span></span> and <span
            class="math math-inline"><span class="katex"><span class="katex-mathml">count(index+1,1)\text{count}(index + 1, 1)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">1</span><span class="mclose">)</span></span></span></span></span></li>
    <li><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,1)\text{count}(index, 1)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span
            class="mclose">)</span></span></span></span></span> depends only on <span class="math math-inline"><span
            class="katex"><span class="katex-mathml">count(index+1,1)\text{count}(index + 1, 1)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">1</span><span class="mclose">)</span></span></span></span></span> and <span
            class="math math-inline"><span class="katex"><span class="katex-mathml">count(index+1,2)\text{count}(index + 1, 2)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">2</span><span class="mclose">)</span></span></span></span></span></li>
    <li><span class="math math-inline"><span class="katex"><span class="katex-mathml">count(index,2)\text{count}(index, 2)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span
            class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span><span
            class="mclose">)</span></span></span></span></span> depends only on <span class="math math-inline"><span
            class="katex"><span class="katex-mathml">count(index+1,0)\text{count}(index + 1, 0)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">0</span><span class="mclose">)</span></span></span></span></span>, <span
            class="math math-inline"><span class="katex"><span class="katex-mathml">count(index+1,1)\text{count}(index + 1, 1)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">1</span><span class="mclose">)</span></span></span></span></span> and <span
            class="math math-inline"><span class="katex"><span class="katex-mathml">count(index+1,2)\text{count}(index + 1, 2)</span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord text"><span class="mord">count</span></span><span class="mopen">(</span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
            class="mord">1</span><span class="mpunct">,</span><span class="mspace"
                                                                    style="margin-right: 0.1667em;"></span><span
            class="mord">2</span><span class="mclose">)</span></span></span></span></span></li>
</ul>
<p>In other words, we can say that to compute three values at index <span class="math math-inline"><span
        class="katex"><span class="katex-mathml">indexindex</span><span class="katex-html" aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span
        class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span
        class="mord mathnormal">x</span></span></span></span></span>, we need only three values at index <span
        class="math math-inline"><span class="katex"><span class="katex-mathml">index+1index + 1</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
        class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
        class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                    style="margin-right: 0.2222em;"></span><span
        class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
        class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>. Hence,
    we can save only three variables, namely <code>zero</code>, <code>one</code>, and <code>two</code> that represent
    the values at the most recent computed index <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">index+1index + 1</span><span class="katex-html" aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span
            class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span
            class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace"
                                                                                        style="margin-right: 0.2222em;"></span><span
            class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>.
</p>
<ul>
    <li>
        <p>Initially</p>
        <ul>
            <li><code>zero = 0</code></li>
            <li><code>one = 0</code></li>
            <li><code>two = 1</code></li>
        </ul>
    </li>
    <li>
        <p>If <code>corridor[index]</code> is <code>S</code>, then</p>
        <ul>
            <li><code>new_zero = one</code></li>
            <li><code>new_one = two</code></li>
            <li><code>new_two = one</code></li>
        </ul>
        <p>Then we can update the values of <code>zero</code>, <code>one</code>, and <code>two</code> as <code>zero =
            new_zero</code>, <code>one = new_one</code>, and <code>two = new_two</code>.</p>
        <p>However, it is worth noting that <code>zero</code> is not used in the computation of any new variables. Thus,
            <code>zero = one</code> will work, and we are not overwriting the value of <code>zero</code> before using
            it.<br>
            Adding to it, next we just need to swap the values of <code>one</code> and <code>two</code>. Hence, the
            final update is as</p>
        <ul>
            <li><code>zero = one</code></li>
            <li><code>swap(one, two)</code>. For this, we can do an XOR swap or can use a temporary variable.</li>
        </ul>
    </li>
    <li>
        <p>If <code>corridor[index]</code> is <code>P</code>, then</p>
        <ul>
            <li><code>new_zero = zero</code></li>
            <li><code>new_one = one</code></li>
            <li><code>new_two = (zero + two) % MOD</code></li>
        </ul>
        <p>Then we can update the values of <code>zero</code>, <code>one</code>, and <code>two</code> as <code>zero =
            new_zero</code>, <code>one = new_one</code>, and <code>two = new_two</code>.</p>
        <p>However, it is worth noting that <code>zero</code> and <code>one</code> remain unchanged in all of these
            assignments. Thus, updating <code>zero</code> and <code>one</code> is redundant.<br>
            Regarding <code>two</code>, we just need to add <code>zero</code> in it, and then take modulo
            <code>MOD</code>. Hence, the final update is as</p>
        <ul>
            <li><code>two = (two + zero) % MOD</code></li>
        </ul>
    </li>
</ul>
<p>Due to the symmetry of <code>count</code>, the <code>corridor</code> traversal is possible from left to right as well
    as from right to left. We will traverse the <code>corridor</code> from left to right this time.</p>
<p>At last, our answer will be stored in variable <code>zero</code>, as initially, we have zero number of <code>S</code>.
</p>
<h4 id="algorithm-2">Algorithm</h4>
<ol>
    <li>
        <p>Store <code>1000000007</code> in the variable <code>MOD</code> for convenience. It is a good practice to
            store constants.</p>
    </li>
    <li>
        <p>Initialize three variables <code>zero</code>, <code>one</code>, and <code>two</code> to <code>0</code>,
            <code>0</code>, and <code>1</code> respectively.</p>
    </li>
    <li>
        <p>Traverse <code>corridor</code> from left to right, for <code>index</code> from <code>0</code> to <code>n -
            1</code></p>
        <ul>
            <li>if <code>corridor[index]</code> is <code>S</code>, then
                <ul>
                    <li><code>zero = one</code></li>
                    <li><code>swap(one, two)</code></li>
                </ul>
            </li>
            <li>if <code>corridor[index]</code> is <code>P</code>, then
                <ul>
                    <li><code>two = (two + zero) % MOD</code></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>Return <code>zero</code> as we have a zero number of <code>S</code> initially.</p>
    </li>
</ol>
<h4 id="implementation-2">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
public:
    int numberOfWays(string corridor) {
        // Store 1000000007 in a variable for convenience
        const int MOD = 1e9 + 7;

        // Initial values of three variables
        int zero = 0;
        int one = 0;
        int two = 1;

        // Compute using derived equations
        for (char thing : corridor) {
            if (thing == 'S') {
                zero = one;
                swap(one, two);
            } else {
                two = (two + zero) % MOD;
            }
        }

        // Return the result
        return zero;
    }
};
    </code>
    C++
    <code>
        class Solution {
    public int numberOfWays(String corridor) {
        // Store 1000000007 in a variable for convenience
        final int MOD = 1_000_000_007;

        // Initial values of three variables
        int zero = 0;
        int one = 0;
        int two = 1;

        // Compute using derived equations
        for (char thing : corridor.toCharArray()) {
            if (thing == 'S') {
                zero = one;
                int temp = one;
                one = two;
                two = temp;
            } else {
                two = (two + zero) % MOD;
            }
        }

        // Return the result
        return zero;
    }
}
    </code>
    Python3
    <code>
        class Solution {
    public int numberOfWays(String corridor) {
        // Store 1000000007 in a variable for convenience
        final int MOD = 1_000_000_007;

        // Initial values of three variables
        int zero = 0;
        int one = 0;
        int two = 1;

        // Compute using derived equations
        for (char thing : corridor.toCharArray()) {
            if (thing == 'S') {
                zero = one;
                int temp = one;
                one = two;
                two = temp;
            } else {
                two = (two + zero) % MOD;
            }
        }

        // Return the result
        return zero;
    }
}
    </code>
</pre>
<h4 id="complexity-analysis-2">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">NN</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                                style="margin-right: 0.10903em;">N</span></span></span></span></span>
    be the length of the <code>corridor</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are linearly traversing the <code>corridor</code>. In each iteration, we are updating three variables,
            which will take constant time. Thus, the time complexity will be <span class="math math-inline"><span
                    class="katex"><span class="katex-mathml">O(N)⋅O(1)O(N) \cdot O(1)</span><span class="katex-html"
                                                                                                  aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord">1</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are using a handful of variables, which will take constant extra space. Thus, the space complexity will be
            <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(1)O(1)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>.</p>
    </li>
</ul>
<hr>
<h3 id="approach-4-combinatorics">Approach 4: Combinatorics</h3>
<h4 id="intuition-3">Intuition</h4>
<p>Let's derive intuition for this approach using a simple puzzle.</p>
<blockquote>
    <p><strong>Puzzle:</strong> If we have 2 paths from A to B and 3 paths from B to C, then how many paths are there
        from A to C?<br>
        <img src="Slide6_1.PNG" alt="puzzle_abc" style="height: 75px;"></p>
    <p>The answer is 6. We can enumerate all the paths as</p>
    <ul>
        <li>A to B using yellow edge, and B to C using red edge</li>
        <li>A to B using yellow edge, and B to C using purple edge</li>
        <li>A to B using yellow edge, and B to C using blue edge</li>
        <li>A to B using green edge, and B to C using red edge</li>
        <li>A to B using green edge, and B to C using purple edge</li>
        <li>A to B using green edge, and B to C using blue edge</li>
    </ul>
    <p>Because from every path from A to B, we can reach C using any one of the three paths from B to C. Hence, the
        answer is <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">2⋅3=62 \cdot 3 = 6</span><span class="katex-html" aria-hidden="true"><span
                class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span
                class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace"
                                                                                                       style="margin-right: 0.2222em;"></span></span><span
                class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span
                class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"
                                                                                                       style="margin-right: 0.2778em;"></span></span><span
                class="base"><span class="strut" style="height: 0.6444em;"></span><span
                class="mord">6</span></span></span></span></span>.</p>
    <p>What if we add another city from C to D, and there are 2 paths from C to D? Then how many paths are there from A
        to D?<br>
        <img src="Slide6_2.PNG" alt="puzzle_abcd" style="height: 75px;"></p>
    <p>For every 6 A to C paths enumerated above,</p>
    <ul>
        <li>we can append a pink edge to reach D from C. This will give us 6 A to D paths.</li>
        <li>we can append an orange edge to reach D from C. This will give us 6 A to D paths.</li>
    </ul>
    <p>This gives us a total of 12 A to D paths.</p>
</blockquote>
<p>The answers obtained above implicitly multiply the number of paths between the cities. This is a well-established
    fact in <a href="https://en.wikipedia.org/wiki/Combinatorial_principles" target="_blank">combinatorics</a>, known as
    <a href="https://en.wikipedia.org/wiki/Rule_of_product" target="_blank">Fundamental Principle of Counting</a>,
    particularly the <strong>principle of multiplication</strong>. The <strong>principle of multiplication</strong> or
    the product rule deals with the ‘AND’ statement.</p>
<p><em>"If a task can be performed in a sequence of tasks, where one task is being completed one after the other, then
    the total number of ways of performing the task is the product of the number of ways they can be performed
    individually"</em></p>
<blockquote>
    <p>Although not mentioned explicitly, in <a href="#approach-1-top-down-dynamic-programming"
                                                rel="noopener noreferrer nofollow ugc" target="_self">dynamic
        programming approaches</a>, we were using the <a href="https://en.wikipedia.org/wiki/Addition_principle"
                                                         target="_blank"><strong>principle of addition</strong></a> or
        the sum rule.</p>
    <p>The <strong>principle of addition</strong> or the sum rule deals with the ‘OR’ statement. It states that "If we
        consider two tasks that have to be done, and task <em>cannot be done simultaneously</em>, then the total number
        of ways of performing the task is the sum of the number of ways they can be performed individually".</p>
</blockquote>
<p>Let's try to find out how this will be useful in our problem. Let the arrangement in the corridor be represented by
    the following illustration. The <code>...</code> represents any number of <code>P</code> (including <code>0</code>).
</p>
<p><img src="Slide7_1.PNG" alt="fpm_1" style="height: 75px;"></p>
<p>As discussed in <a href="#overview" rel="noopener noreferrer nofollow ugc" target="_self">overview</a>, the pair of a
    seat <code>S</code> is fixed.</p>
<p><img src="Slide7_2.PNG" alt="fpm_2" style="height: 75px;"></p>
<p>Again, from the fact discussed in <a href="#overview" rel="noopener noreferrer nofollow ugc"
                                        target="_self">overview</a>, we can say that <code>...</code> plants don't offer
    any facility to install dividers.</p>
<p>We can only install a divider between two <code>S</code> which are neighbors, but not paired.</p>
<p>Thus, between yellow-blue <code>S</code>, we have <em>two</em> choices of installing a divider, and between
    blue-orange <code>S</code>, we have <em>three</em> choices of installing a divider. This is computed as the
    difference between indices of non-paired neighbors.</p>
<p><img src="Slide7_3.PNG" alt="fpm_3" style="height: 75px;"></p>
<p>Hence, using the multiplication principle, we can say that the total number of ways to divide the corridor is <span
        class="math math-inline"><span class="katex"><span class="katex-mathml">2⋅3=62 \cdot 3 = 6</span><span
        class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                       style="height: 0.6444em;"></span><span
        class="mord">2</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
        class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
        class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace"
                                                                                        style="margin-right: 0.2778em;"></span><span
        class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span
        class="strut" style="height: 0.6444em;"></span><span class="mord">6</span></span></span></span></span>.<br>
    <em>Every pink divider has three choices of purple divider, and exactly one will be chosen</em></p>
<p><img src="Slide8_and_9.PNG" alt="fpm_4" style="height: 400px;"></p>
<p>Hence, what eventually matters is the difference between indices of non-paired <code>S</code> neighbors. Hence, we
    can store indices of <code>S</code> in an array, and then compute the difference between indices of non-paired
    <code>S</code> neighbors. The differences need to be multiplied to get the final answer. We also need to take care
    of modulo, thus, we will use properties of modulo arithmetic.</p>
<h4 id="algorithm-3">Algorithm</h4>
<ol>
    <li>
        <p>Store <code>1000000007</code> in the variable <code>MOD</code> for convenience. It is a good practice to
            store constants.</p>
    </li>
    <li>
        <p>Declare array/list <code>indices</code> to store indices of <code>S</code> in the <code>corridor</code>.
            Traverse linearly in the <code>corridor</code>, and store indices of <code>S</code> in the
            <code>indices</code> array.</p>
    </li>
    <li>
        <p>If <code>indices</code> is empty, or if the length of <code>indices</code> is odd, then return <code>0</code>.
            This is the case when no divider can be installed such that each section contains <strong>exactly</strong>
            two <code>S</code>.</p>
    </li>
    <li>
        <p>Initialize a variable <code>count</code> to <code>1</code>. This will store the final answer.</p>
        <blockquote>
            <p>If we want to take the product of integers, then we should initialize the variable to <code>1</code>. If
                we want to take the sum of integers, then we should initialize the variable to <code>0</code>.</p>
            <p><strong>Caution:</strong> We will always restrict <code>count</code> to be less than
                <code>MOD</code>.<br>
                Now, we may want to multiply <code>count</code> with "differences between seat indices"</p>
            <ul>
                <li>The maximum value of <code>count</code> can be <code>1000000006</code> (one less than
                    <code>MOD</code>). which is roughly <span class="math math-inline"><span class="katex"><span
                            class="katex-mathml">10910^9</span><span class="katex-html" aria-hidden="true"><span
                            class="base"><span class="strut" style="height: 0.8141em;"></span><span
                            class="mord">1</span><span class="mord"><span class="mord">0</span><span
                            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                              style="height: 0.8141em;"><span
                            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                               style="height: 2.7em;"></span><span
                            class="sizing reset-size6 size3 mtight"><span
                            class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span>.
                </li>
                <li>The maximum value of "differences between seat indices" can be analyzed by looking at constraints.
                    It can be as large as <code>(100000 - 1) - 0</code>, which is roughly <span
                            class="math math-inline"><span class="katex"><span class="katex-mathml">10510^5</span><span
                            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                           style="height: 0.8141em;"></span><span
                            class="mord">1</span><span class="mord"><span class="mord">0</span><span
                            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                              style="height: 0.8141em;"><span
                            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                               style="height: 2.7em;"></span><span
                            class="sizing reset-size6 size3 mtight"><span
                            class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span>.
                </li>
            </ul>
            <p>Now, their product can be as large as <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span
                    class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span
                    class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
                    style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                       style="height: 2.7em;"></span><span
                    class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                    class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>,
                which is greater than <code>INT_MAX</code> (<span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">231−12^{31} - 1</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut"
                                           style="height: 0.8974em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                        class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
                        style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
                        class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                        class="mord mtight">31</span></span></span></span></span></span></span></span></span><span
                        class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>)
                in many programming languages.<br>
                Thus, we need to make sure that <code>count</code> has enough capacity to store this product.</p>
            <p>Readers might be prompmted to think that <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">(a⋅b) mod c=((a&nbsp;mod&nbsp;c)&nbsp;⸱&nbsp;(b&nbsp;mod&nbsp;c)) mod c(a \cdot b) \bmod c = \textbf{((a mod c) ⸱ (b mod c))} \bmod c</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                      style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.0556em;"></span><span
                    class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin"><span class="mord"><span
                    class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                      style="margin-right: 0.0556em;"></span><span
                    class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.4306em;"></span><span
                    class="mord mathnormal">c</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord text"><span
                    class="mord textbf">((a&nbsp;mod&nbsp;c)&nbsp;⸱&nbsp;(b&nbsp;mod&nbsp;c))</span></span><span
                    class="mspace" style="margin-right: 0.0556em;"></span><span class="mspace"
                                                                                style="margin-right: 0.2222em;"></span><span
                    class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.0556em;"></span><span class="mspace"
                                                                                style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.4306em;"></span><span
                    class="mord mathnormal">c</span></span></span></span></span> might be useful to avoid overflow.
                Overall computation will clip the value of <code>count</code> to be less than <code>MOD</code>. However,
                the <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">bold\textbf{bold}</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span
                        class="mord textbf">bold</span></span></span></span></span></span> part can still overflow.
                Thus, we must take care of it.</p>
        </blockquote>
    </li>
    <li>
        <p>Initialize two variables</p>
        <ul>
            <li><code>previous_pair_last</code> to <code>1</code></li>
            <li><code>current_pair_first</code> to <code>2</code></li>
        </ul>
    </li>
    <li>
        <p>While <code>current_pair_first</code> is less than the length of <code>indices</code>, do the following</p>
        <ul>
            <li>
                <p>update <code>count</code> as <code>count = (count * (indices[current_pair_first] -
                    indices[previous_pair_last])) % MOD</code></p>
            </li>
            <li>
                <p>increment <code>previous_pair_last</code> by <code>2</code></p>
            </li>
            <li>
                <p>increment <code>current_pair_first</code> by <code>2</code></p>
            </li>
        </ul>
        <blockquote>
            <p>The loop invariant ensures that <code>current_pair_first</code> is equal to <code>previous_pair_last +
                1</code>. Thus, instead of two variables, we can use a single variable as well.</p>
        </blockquote>
    </li>
    <li>
        <p>Return <code>count</code>. Make sure to return <code>count</code> as <code>int</code> as required by the
            function signature.</p>
    </li>
</ol>
<h4 id="implementation-3">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
    public int numberOfWays(String corridor) {
        // Store 1000000007 in a variable for convenience
        final int MOD = 1_000_000_007;

        // Store indices of S in an array
        List<Integer> indices = new ArrayList<>();
        for (int index = 0; index < corridor.length(); index++) {
            if (corridor.charAt(index) == 'S') {
                indices.add(index);
            }
        }

        // When division is not possible
        if (indices.size() == 0 || indices.size() % 2 == 1) {
            return 0;
        }

        // Total number of ways
        long count = 1;

        // Take product of non-paired neighbors
        int previousPairLast = 1;
        int currentPairFirst = 2;
        while (currentPairFirst < indices.size()) {
            count *= (indices.get(currentPairFirst) - indices.get(previousPairLast));
            count %= MOD;
            previousPairLast += 2;
            currentPairFirst += 2;
        }

        // Return the number of ways
        return (int) count;
    }
}
    </code>
    C++
    <code>
        class Solution {
public:
    int numberOfWays(string corridor) {
        // Store 1000000007 in a variable for convenience
        const int MOD = 1e9 + 7;

        // Store indices of S in an array
        vector<int> indices;
        for (int index = 0; index < corridor.length(); index++) {
            if (corridor[index] == 'S') {
                indices.push_back(index);
            }
        }

        // When division is not possible
        if (indices.size() == 0 || indices.size() % 2 == 1) {
            return 0;
        }

        // Total number of ways
        long count = 1;

        // Take product of non-paired neighbors
        int previousPairLast = 1;
        int currentPairFirst = 2;
        while (currentPairFirst < indices.size()) {
            count *= (indices[currentPairFirst] - indices[previousPairLast]);
            count %= MOD;
            previousPairLast += 2;
            currentPairFirst += 2;
        }

        // Return the number of ways
        return (int) count;
    }
};
    </code>
    Python3
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Store indices of S in an array
        indices = []
        for i, thing in enumerate(corridor):
            if thing == "S":
                indices.append(i)

        # When division is not possible
        if indices == [] or len(indices) % 2 == 1:
            return 0

        # Total number of ways
        count = 1

        # Take the product of non-paired neighbors
        previous_pair_last = 1
        current_pair_first = 2
        while current_pair_first < len(indices):
            count *= (indices[current_pair_first] - indices[previous_pair_last])
            count %= MOD
            previous_pair_last += 2
            current_pair_first += 2

        # Return the number of ways
        return count
    </code>
</pre>
<p><strong>Implementation Note:</strong> As mentioned in <a href="#algorithm-3" rel="noopener noreferrer nofollow ugc"
                                                            target="_self">algorithm</a>, we need to declare
    <code>count</code> such that it can store value as large as <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span
            class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                                         style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>,
    which is approximately <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">2462^{46}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord">2</span><span
            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                              style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">46</span></span></span></span></span></span></span></span></span></span></span></span></span>.
    Thus, we need a data type of size of at least <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">4646</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.6444em;"></span><span class="mord">46</span></span></span></span></span>
    bits.</p>
<p>In C++, we have used <code>long</code> to avoid overflow. The <a
        href="https://en.cppreference.com/w/cpp/language/types" target="_blank">standard</a> ensures <code>long</code>
    is <span class="math math-inline"><span class="katex"><span class="katex-mathml">6464</span><span class="katex-html"
                                                                                                      aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">64</span></span></span></span></span>
    bits in LP64 data model, which can store <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">264−12^{64}-1</span><span class="katex-html" aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span
            class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
            class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">64</span></span></span></span></span></span></span></span></span><span
            class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                                                                                                   style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>,
    and it is much larger than <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span
            class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                                         style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>.
    Similar constraint is fulfilled by <code>long</code> in <a
            href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html" target="_blank">Java</a></p>
<h4 id="complexity-analysis-3">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">NN</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                                style="margin-right: 0.10903em;">N</span></span></span></span></span>
    be the length of the <code>corridor</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are linearly traversing the <code>corridor</code> to store indices of <code>S</code> in an array. This
            will take <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span> time.</p>
        <p>We are also linearly traversing the <code>indices</code> array to compute the product of differences between
            indices of non-paired <code>S</code> neighbor. These computations take constant time, and there can be at
            most <span class="math math-inline"><span class="katex"><span class="katex-mathml">N/2N/2</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mord">/2</span></span></span></span></span>
            such computations. Thus, this will take <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">O(N/2)⋅O(1)O(N/2) \cdot O(1)</span><span class="katex-html" aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mord">/2</span><span
                    class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span> time, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
        <p>Hence, the overall time complexity will be <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)+O(N)O(N) + O(N)</span><span class="katex-html" aria-hidden="true"><span
                class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span
                class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace"
                                                                                                       style="margin-right: 0.2222em;"></span></span><span
                class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span>, which is <span class="math math-inline"><span
                class="katex"><span class="katex-mathml">O(N)O(N)</span><span class="katex-html"
                                                                              aria-hidden="true"><span
                class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span>.</p>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are using an array to store indices of <code>S</code> in the <code>corridor</code>. This, in worst case,
            may take <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span> space.</p>
    </li>
</ul>
<hr>
<h3 id="approach-5-combinatorics-space-optimized">Approach 5: Combinatorics, Space Optimized</h3>
<h4 id="intuition-4">Intuition</h4>
<p>In the <a href="#approach-4-combinatorics" rel="noopener noreferrer nofollow ugc" target="_self">previous
    approach</a>, we were storing indices of <code>S</code> in an array. Let's try to come up with a way to avoid using
    this array.</p>
<p>The reason we were storing indices was to compute the index difference between non-paired <code>S</code> neighbors.
</p>
<p>Now, instead of storing all of the indices in the array, we can store only the index of the last <code>S</code> in
    the previous section. This will help us to compute the index difference when we see the first <code>S</code> in the
    current section. The next <code>S</code> in the current section then will become the last <code>S</code> in the
    previous section.</p>
<p>Hence, we can calculate the index difference on the fly by keeping track of <code>previous_pair_last</code>. To
    identify if <code>S</code> corresponds to <code>current_pair_first</code> or <code>previous_pair_last</code>, we can
    use a counter variable <code>seats</code>.</p>
<p>Readers are encouraged to implement this approach. Make sure to handle corner cases, particularly cases when no
    divider can be installed such that each section contains <strong>exactly</strong> two <code>S</code>. Moreover, make
    sure to avoid overflow.</p>
<h4 id="algorithm-4">Algorithm</h4>
<ol>
    <li>
        <p>Store <code>1000000007</code> in the variable <code>MOD</code> for convenience. It is a good practice to
            store constants.</p>
    </li>
    <li>
        <p>Initialize a variable <code>count</code> to <code>1</code>. This will store the final answer.</p>
        <blockquote>
            <p>If we want to take the product of integers, then we should initialize the variable to <code>1</code>. If
                we want to take the sum of integers, then we should initialize the variable to <code>0</code>.</p>
            <p><strong>Caution:</strong> We will always restrict <code>count</code> to be less than
                <code>MOD</code>.<br>
                Now, we may want to multiply <code>count</code> with "differences between seat indices"</p>
            <ul>
                <li>The maximum value of <code>count </code> can be <code>1000000006</code> (one less than
                    <code>MOD</code>). which is roughly <span class="math math-inline"><span class="katex"><span
                            class="katex-mathml">10910^9</span><span class="katex-html" aria-hidden="true"><span
                            class="base"><span class="strut" style="height: 0.8141em;"></span><span
                            class="mord">1</span><span class="mord"><span class="mord">0</span><span
                            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                              style="height: 0.8141em;"><span
                            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                               style="height: 2.7em;"></span><span
                            class="sizing reset-size6 size3 mtight"><span
                            class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span>.
                </li>
                <li>The maximum value of "differences between seat indices" can be analyzed by looking at constraints.
                    It can be as large as <code>(100000 - 1) - 0</code>, which is roughly <span
                            class="math math-inline"><span class="katex"><span class="katex-mathml">10510^5</span><span
                            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                           style="height: 0.8141em;"></span><span
                            class="mord">1</span><span class="mord"><span class="mord">0</span><span
                            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                              style="height: 0.8141em;"><span
                            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                               style="height: 2.7em;"></span><span
                            class="sizing reset-size6 size3 mtight"><span
                            class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span>.
                </li>
            </ul>
            <p>Now, their product can be as large as <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span
                    class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span
                    class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
                    style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut"
                                                                       style="height: 2.7em;"></span><span
                    class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                    class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>,
                which is greater than <code>INT_MAX</code> (<span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">231−12^{31} - 1</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut"
                                           style="height: 0.8974em; vertical-align: -0.0833em;"></span><span
                        class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
                        class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
                        style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
                        class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                        class="mord mtight">31</span></span></span></span></span></span></span></span></span><span
                        class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span
                        class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span
                        class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>)
                in many programming languages.<br>
                Thus, we need to make sure that <code>count</code> has enough capacity to store this product.</p>
            <p>Readers might be prompmted to think that <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">(a⋅b) mod c=((a&nbsp;mod&nbsp;c)&nbsp;⸱&nbsp;(b&nbsp;mod&nbsp;c)) mod c(a \cdot b) \bmod c = \textbf{((a mod c) ⸱ (b mod c))} \bmod c</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"
                                                                                      style="margin-right: 0.2222em;"></span><span
                    class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"
                                                                                       style="margin-right: 0.0556em;"></span><span
                    class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin"><span class="mord"><span
                    class="mord mathrm">mod</span></span></span><span class="mspace"
                                                                      style="margin-right: 0.0556em;"></span><span
                    class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 0.4306em;"></span><span
                    class="mord mathnormal">c</span><span class="mspace" style="margin-right: 0.2778em;"></span><span
                    class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord text"><span
                    class="mord textbf">((a&nbsp;mod&nbsp;c)&nbsp;⸱&nbsp;(b&nbsp;mod&nbsp;c))</span></span><span
                    class="mspace" style="margin-right: 0.0556em;"></span><span class="mspace"
                                                                                style="margin-right: 0.2222em;"></span><span
                    class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span
                    class="mspace" style="margin-right: 0.0556em;"></span><span class="mspace"
                                                                                style="margin-right: 0.2222em;"></span></span><span
                    class="base"><span class="strut" style="height: 0.4306em;"></span><span
                    class="mord mathnormal">c</span></span></span></span></span> might be useful to avoid overflow.
                Overall computation will clip the value of <code>count</code> to be less than <code>MOD</code>. However,
                the <span class="math math-inline"><span class="katex"><span
                        class="katex-mathml">bold\textbf{bold}</span><span class="katex-html" aria-hidden="true"><span
                        class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span
                        class="mord textbf">bold</span></span></span></span></span></span> part can still overflow.
                Thus, we must take care of it.</p>
        </blockquote>
    </li>
    <li>
        <p>Initialize two variables</p>
        <ul>
            <li><code>previous_pair_last</code> to <code>null</code>. It will store the index of the last <code>S</code>
                in the previous section.
            </li>
            <li><code>seats</code> to <code>0</code>. It will store the number of <code>S</code> in the current section.
            </li>
        </ul>
    </li>
    <li>
        <p>Iterate over <code>corridor</code> from left to right, for <code>index</code> from <code>0</code> to <code>n
            - 1</code></p>
        <ul>
            <li>if <code>corridor[index]</code> is <code>S</code>, then
                <ul>
                    <li>increment <code>seats</code> by <code>1</code></li>
                    <li>if <code>seats == 2</code>, then
                        <ul>
                            <li>update <code>previous_pair_last</code> as <code>index</code></li>
                            <li>reset <code>seats</code> to <code>0</code></li>
                        </ul>
                    </li>
                    <li>else if <code>seats == 1</code> and there exists a previous section, then update
                        <code>count</code> as <code>count = (count * (index - previous_pair_last)) % MOD</code></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <p>If <code>seats == 1</code>, it means there are an odd number of <code>S</code> in the <code>corridor</code>.
            Thus, return <code>0</code>.</p>
    </li>
    <li>
        <p>If <code>seats</code> is not equal to <code>1</code>, then it must be equal to <code>0</code>, because as
            soon as it reaches <code>2</code>, we reset it to <code>0</code>. Now <code>seats</code> can be
            <code>0</code> when</p>
        <ul>
            <li>there are non-zero even number of <code>S</code> in the <code>corridor</code></li>
            <li>there is no <code>S</code> in the <code>corridor</code></li>
        </ul>
        <p>In the latter case, we should return <code>0</code>. Both cases are differentiated from the fact that in the
            former case <code>previous_pair_last</code> will be some integer representing index, while in the latter
            case <code>previous_pair_last</code> will be <code>null</code>.</p>
        <p>Thus, if <code>previous_pair_last</code> is <code>null</code>, then return <code>0</code>.</p>
    </li>
    <li>
        <p>Return <code>count</code>. Make sure to return <code>count</code> as <code>int</code> as required by the
            function signature.</p>
    </li>
</ol>
<h4 id="implementation-4">Implementation</h4>
<pre>
    Java
    <code>
        class Solution {
    public int numberOfWays(String corridor) {
        // Store 1000000007 in a variable for convenience
        final int MOD = 1_000_000_007;

        // Total number of ways
        long count = 1;

        // Number of seats in the current section
        int seats = 0;

        // Tracking Index of last S in the previous section
        Integer previousPairLast = null;

        // Keep track of seats in corridor
        for (int index = 0; index < corridor.length(); index++) {
            if (corridor.charAt(index) == 'S') {
                seats += 1;

                // If two seats, then this is the last S in the section
                // Update seats for the next section
                if (seats == 2) {
                    previousPairLast = index;
                    seats = 0;
                }

                // If one seat, then this is the first S in the section
                // Compute product of non-paired neighbors
                else if (seats == 1 && previousPairLast != null) {
                    count *= (index - previousPairLast);
                    count %= MOD;
                }
            }
        }

        // If odd seats, or zero seats
        if (seats == 1 || previousPairLast == null) {
            return 0;
        }

        // Return the number of ways
        return (int) count;
    }
}
    </code>
    C++
    <code>
        class Solution {
public:
    int numberOfWays(string corridor) {
        // Store 1000000007 in a variable for convenience
        const int MOD = 1e9 + 7;

        // Total number of ways
        long count = 1;

        // Number of seats in the current section
        int seats = 0;

        // Tracking Index of last S in the previous section
        int previousPairLast = -1;

        // Keep track of seats in corridor
        for (int index = 0; index < corridor.length(); index++) {
            if (corridor[index] == 'S') {
                seats += 1;

                // If two seats, then this is the last S in the section
                // Update seats for the next section
                if (seats == 2) {
                    previousPairLast = index;
                    seats = 0;
                }

                // If one seat, then this is the first S in the section
                // Compute product of non-paired neighbors
                else if (seats == 1 && previousPairLast != -1) {
                    count *= (index - previousPairLast);
                    count %= MOD;
                }
            }
        }

        // If odd seats, or zero seats
        if (seats == 1 || previousPairLast == -1) {
            return 0;
        }

        // Return the number of ways
        return (int) count;
    }
};
    </code>
    Python3
    <code>
        class Solution:
    def numberOfWays(self, corridor: str) -> int:
        # Store 1000000007 in a variable for convenience
        MOD = 1_000_000_007

        # Total number of ways
        count = 1

        # Number of seats in current section
        seats = 0

        # Tracking Index of last S in the previous section
        previous_pair_last = None

        # Keep track of seats in the corridor
        for index, thing in enumerate(corridor):
            if thing == "S":
                seats += 1

                # If two seats, then this is the last S in the section
                # Update seats for the next section
                if seats == 2:
                    previous_pair_last = index
                    seats = 0

                # If one seat, then this is the first S in the section
                # Compute the product of non-paired neighbors
                elif seats == 1 and previous_pair_last is not None:
                    count *= (index - previous_pair_last)
                    count %= MOD

        # If odd seats, or zero seats
        if seats == 1 or previous_pair_last is None:
            return 0

        # Return the number of ways
        return count
    </code>
</pre>
<p><strong>Implementation Note:</strong> As mentioned in <a href="#algorithm-4" rel="noopener noreferrer nofollow ugc"
                                                            target="_self">algorithm</a>, we need to declare
    <code>count</code> such that it can store value as large as <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span
            class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                                         style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>,
    which is approximately <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">2462^{46}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord">2</span><span
            class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                              style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">46</span></span></span></span></span></span></span></span></span></span></span></span></span>.
    Thus, we need a data type of size of at least <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">4646</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.6444em;"></span><span class="mord">46</span></span></span></span></span>
    bits.</p>
<p>In C++, we have used <code>long</code> to avoid overflow. The <a
        href="https://en.cppreference.com/w/cpp/language/types" target="_blank">standard</a> ensures <code>long</code>
    is <span class="math math-inline"><span class="katex"><span class="katex-mathml">6464</span><span class="katex-html"
                                                                                                      aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">64</span></span></span></span></span>
    bits in LP64 data model, which can store <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">264−12^{64}-1</span><span class="katex-html" aria-hidden="true"><span
            class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span
            class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span
            class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">64</span></span></span></span></span></span></span></span></span><span
            class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                                                                                                   style="margin-right: 0.2222em;"></span></span><span
            class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>,
    and it is much larger than <span class="math math-inline"><span class="katex"><span
            class="katex-mathml">101410^{14}</span><span class="katex-html" aria-hidden="true"><span class="base"><span
            class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span
            class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"
                                                                                                         style="height: 0.8141em;"><span
            style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span
            class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">14</span></span></span></span></span></span></span></span></span></span></span></span></span>.
    A similar constraint is fulfilled by <code>long</code> in <a
            href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html" target="_blank">Java</a></p>
<h4 id="complexity-analysis-4">Complexity Analysis</h4>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml">NN</span><span class="katex-html"
                                                                                                    aria-hidden="true"><span
        class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal"
                                                                                style="margin-right: 0.10903em;">N</span></span></span></span></span>
    be the length of the <code>corridor</code>.</p>
<ul>
    <li>
        <p>Time complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(N)O(N)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are linearly traversing the <code>corridor</code>. In each iteration, we are doing constant time
            computations. Thus, the time complexity will be <span class="math math-inline"><span class="katex"><span
                    class="katex-mathml">O(N)⋅O(1)O(N) \cdot O(1)</span><span class="katex-html"
                                                                              aria-hidden="true"><span
                    class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span
                    class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut"
                                                                                                          style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>, which is <span
                    class="math math-inline"><span class="katex"><span class="katex-mathml">O(N)O(N)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord mathnormal" style="margin-right: 0.10903em;">N</span><span
                    class="mclose">)</span></span></span></span></span>.</p>
    </li>
    <li>
        <p>Space complexity: <span class="math math-inline"><span class="katex"><span
                class="katex-mathml">O(1)O(1)</span><span class="katex-html" aria-hidden="true"><span class="base"><span
                class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal"
                                                                                         style="margin-right: 0.02778em;">O</span><span
                class="mopen">(</span><span class="mord">1</span><span
                class="mclose">)</span></span></span></span></span></p>
        <p>We are using a handful of variables, which will take constant extra space. Thus, the space complexity will be
            <span class="math math-inline"><span class="katex"><span class="katex-mathml">O(1)O(1)</span><span
                    class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                                   style="height: 1em; vertical-align: -0.25em;"></span><span
                    class="mord mathnormal" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span
                    class="mord">1</span><span class="mclose">)</span></span></span></span></span>.</p>
    </li>
</ul>
<hr>
</body>
</html>